(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19119,e=>{"use strict";e.i(36180);var t=e.i(98925),a=e.i(59141);function n(e){let t={};for(let[a,n]of Object.entries(e))void 0!==n&&(t[a]=n);return t}function i(e,n){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");return(0,t.collection)(a.db,"shared","data",n)}async function r(e,a,r){let d=i(e,a),o=n({...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return(await (0,t.addDoc)(d,o)).id}async function d(e,i,r,d){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let o=(0,t.doc)(a.db,"shared","data",i,r),l=n({...d,updatedAt:new Date().toISOString()});await (0,t.setDoc)(o,l)}async function o(e,a,...n){let r=i(e,a),d=n.length>0?(0,t.query)(r,...n):r;return(await (0,t.getDocs)(d)).docs.map(e=>({id:e.id,...e.data()}))}async function l(e,i,r,d){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let o=(0,t.doc)(a.db,"shared","data",i,r),l=n({...d,updatedAt:new Date().toISOString()});await (0,t.updateDoc)(o,l)}async function s(e,n,i){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let r=(0,t.doc)(a.db,"shared","data",n,i);await (0,t.deleteDoc)(r)}function u(e,a,n,...r){let d=i(e,a),o=r.length>0?(0,t.query)(d,...r):d;return(0,t.onSnapshot)(o,e=>{n(e.docs.map(e=>({id:e.id,...e.data()})))})}async function c(e,t,a){let n=a.map(a=>{let{id:n,...i}=a;return d(e,t,n,i)});await Promise.all(n)}function m(e){return u("shared","gameGuides",e,(0,t.orderBy)("order","asc"))}async function _(e){return r("shared","gameGuides",e)}async function h(e,t){return l("shared","gameGuides",e,t)}async function f(e){return s("shared","gameGuides",e)}async function g(e){let t=e.map(e=>_(e));await Promise.all(t)}function p(e){return u("shared","courseNotes",e,(0,t.orderBy)("createdAt","desc"))}function y(e,a){return u("shared","courseNotes",a,(0,t.where)("courseId","==",e),(0,t.orderBy)("createdAt","desc"))}async function w(e){return r("shared","courseNotes",e)}async function T(e,t){return l("shared","courseNotes",e,t)}async function b(e){return s("shared","courseNotes",e)}async function C(e,t){return T(e,{completed:t})}async function S(){return(await o("shared","courseNotes",(0,t.where)("completed","==",!1),(0,t.where)("type","in",["homework","exam"]))).filter(e=>e.dueDate).sort((e,t)=>e.dueDate&&t.dueDate?new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime():0)}e.s(["addCourseNote",()=>w,"addGameGuide",()=>_,"batchImportGameGuides",()=>g,"batchSetDocuments",()=>c,"deleteCourseNote",()=>b,"deleteDocument",()=>s,"deleteGameGuide",()=>f,"getDocuments",()=>o,"getIncompleteTasks",()=>S,"setDocument",()=>d,"subscribeToCollection",()=>u,"subscribeToCourseNotes",()=>p,"subscribeToCourseNotesByCourse",()=>y,"subscribeToGameGuides",()=>m,"toggleCourseNoteCompletion",()=>C,"updateCourseNote",()=>T,"updateDocument",()=>l,"updateGameGuide",()=>h])},8437,e=>{e.v({card:"LoginPrompt-module__ERCXna__card",container:"LoginPrompt-module__ERCXna__container",description:"LoginPrompt-module__ERCXna__description",footer:"LoginPrompt-module__ERCXna__footer",googleIcon:"LoginPrompt-module__ERCXna__googleIcon",icon:"LoginPrompt-module__ERCXna__icon",iconWrapper:"LoginPrompt-module__ERCXna__iconWrapper",loginButton:"LoginPrompt-module__ERCXna__loginButton",title:"LoginPrompt-module__ERCXna__title"})},24558,34759,e=>{"use strict";function t(e){return!!e}e.s(["hasWriteAccess",()=>t],24558);var a=e.i(43476),n=e.i(32341),i=e.i(8437);function r(){let{signInWithGoogle:e}=(0,n.useAuth)(),t=async()=>{try{await e()}catch(e){console.error("ç™»å…¥å¤±æ•—:",e),alert("ç™»å…¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}};return(0,a.jsx)("div",{className:i.default.container,children:(0,a.jsxs)("div",{className:i.default.card,children:[(0,a.jsx)("div",{className:i.default.iconWrapper,children:(0,a.jsx)("svg",{className:i.default.icon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,a.jsx)("h2",{className:i.default.title,children:"éœ€è¦ç™»å…¥"}),(0,a.jsx)("p",{className:i.default.description,children:"è«‹å…ˆä½¿ç”¨ Google å¸³è™Ÿç™»å…¥ï¼Œæ‰èƒ½æŸ¥çœ‹èª²è¡¨è³‡æ–™"}),(0,a.jsxs)("button",{onClick:t,className:i.default.loginButton,children:[(0,a.jsxs)("svg",{className:i.default.googleIcon,viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"ä½¿ç”¨ Google ç™»å…¥"]}),(0,a.jsx)("p",{className:i.default.footer,children:"åƒ…é™æŽˆæ¬Šçš„å®¶åº­æˆå“¡ç™»å…¥"})]})})}e.s(["default",()=>r],34759)},93475,e=>{"use strict";var t=e.i(71645),a=e.i(32341);let n=[{id:"mon-1",name:"è·æ¶¯åˆ†æžèˆ‡è¦åŠƒ",day:1,startTime:"08:10",endTime:"10:00",location:"åšæ„›CB105D",color:"#FCD34D"},{id:"mon-2",name:"åœ‹æ–‡(II)ï¼šèªžæ–‡è¡¨é”",day:1,startTime:"10:10",endTime:"12:00",location:"åšæ„›C306",color:"#FB923C"},{id:"mon-3",name:"æ•¸ä½é›»å­å­¸",day:1,startTime:"13:10",endTime:"16:00",location:"åšæ„›G313",color:"#A78BFA"},{id:"tue-1",name:"ç¶²éš›ç¶²è·¯æ¦‚è«–",day:2,startTime:"08:10",endTime:"10:00",location:"åšæ„›G512é›»è…¦æ•™å®¤",color:"#60A5FA"},{id:"tue-2",name:"å¤§å­¸ç”Ÿæ´»å­¸ç¿’èˆ‡è¼”å°Ž",day:2,startTime:"13:10",endTime:"15:00",location:"åšæ„›G313",color:"#F9A8D4"},{id:"wed-1",name:"è‹±æ–‡(II)",day:3,startTime:"08:10",endTime:"10:00",location:"åšæ„›C608",color:"#34D399"},{id:"wed-2",name:"ç¾½çƒ",day:3,startTime:"10:10",endTime:"12:00",location:"åšæ„›å…¬èª æ¨“ç±ƒçƒå ´",color:"#F87171"},{id:"wed-3",name:"è³‡æ–™çµæ§‹",day:3,startTime:"15:10",endTime:"18:00",location:"åšæ„›G513é›»è…¦æ•™å®¤",color:"#818CF8"},{id:"fri-1",name:"æ°‘æ­Œèˆ‡å‰ä»–",day:5,startTime:"08:10",endTime:"10:00",location:"åšæ„›M304",color:"#2DD4BF"},{id:"fri-2",name:"Pythonè³‡æ–™è¦–è¦ºåŒ–",day:5,startTime:"10:10",endTime:"12:00",location:"åšæ„›G521é›»è…¦æ•™å®¤",color:"#A3E635"},{id:"fri-3",name:"Cç¨‹å¼è¨­è¨ˆ",day:5,startTime:"13:10",endTime:"16:00",location:"åšæ„›G512é›»è…¦æ•™å®¤",color:"#FB7185"}],i=[{id:"aut-1",date:"2026-01-11",startTime:"09:00",endTime:"18:00",note:"ç§‹å­£ç­"},{id:"aut-2",date:"2026-01-17",startTime:"09:00",endTime:"18:00",note:"ç§‹å­£ç­"},{id:"aut-3",date:"2026-01-18",startTime:"09:00",endTime:"18:00",note:"ç§‹å­£ç­"},{id:"win-1",date:"2026-01-27",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-2",date:"2026-01-29",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-3",date:"2026-02-02",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-4",date:"2026-02-04",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-5",date:"2026-02-05",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-6",date:"2026-02-06",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-7",date:"2026-02-09",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-8",date:"2026-02-10",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-9",date:"2026-02-11",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-10",date:"2026-02-13",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"}],r=[{id:"sel-1",title:"å¿—é¡˜åºçµæžœæŸ¥è©¢ & æœ¬ç­é¸èª²",date:"2026-01-05",description:"09:00 æŸ¥è©¢çµæžœ / 19:00 é–‹å§‹é¸èª²",type:"deadline"},{id:"sel-2",title:"æœ¬ç³»é¸èª² (å«è¼”é›™)",date:"2026-01-06",description:"19:00 é–‹å§‹",type:"deadline"},{id:"sel-3",title:"è·¨ç³»/è·¨ç­é¸èª²",date:"2026-01-08",description:"19:00 é–‹å§‹",type:"deadline"},{id:"sel-4",title:"å…¨æ ¡ç¶²è·¯åŠ é€€é¸",date:"2026-02-23",description:"ä¸Šåˆ 10:00 é–‹å§‹",type:"deadline"},{id:"sel-5",title:"äººå·¥åŠ é€€é¸",date:"2026-03-02",description:"ä¸Šåˆ 09:00 é–‹å§‹",type:"personal"}];var d=e.i(19119),o=e.i(24558);let l="shared";function s(){let{user:e}=(0,a.useAuth)(),[s,u]=(0,t.useState)([]),[c,m]=(0,t.useState)([]),[_,h]=(0,t.useState)([]),[f,g]=(0,t.useState)(!0),[p,y]=(0,t.useState)(!1),w=async()=>{try{let e=await (0,d.getDocuments)(l,"courses"),t=await (0,d.getDocuments)(l,"workShifts"),a=await (0,d.getDocuments)(l,"events");0===e.length&&await (0,d.batchSetDocuments)(l,"courses",n),0===t.length&&await (0,d.batchSetDocuments)(l,"workShifts",i),0===a.length&&await (0,d.batchSetDocuments)(l,"events",r)}catch(e){console.error("âŒ åˆå§‹åŒ–é è¨­è³‡æ–™å¤±æ•—:",e)}};(0,t.useEffect)(()=>{if(!e){u([]),m([]),h([]),g(!1),y(!1);return}g(!0),y((0,o.hasWriteAccess)(e.email)),w().then(()=>{g(!1)});let t=(0,d.subscribeToCollection)(l,"courses",e=>u(e)),a=(0,d.subscribeToCollection)(l,"workShifts",e=>m(e)),n=(0,d.subscribeToCollection)(l,"events",e=>h(e));return()=>{t(),a(),n()}},[e]);let T=async t=>{e&&p?await (0,d.setDocument)(l,"courses",t.id,t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},b=async(t,a)=>{e&&p?await (0,d.updateDocument)(l,"courses",t,a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},C=async t=>{e&&p?await (0,d.deleteDocument)(l,"courses",t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},S=async t=>{e&&p?await (0,d.setDocument)(l,"workShifts",t.id,t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},v=async(t,a)=>{e&&p?await (0,d.updateDocument)(l,"workShifts",t,a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},x=async t=>{e&&p?await (0,d.deleteDocument)(l,"workShifts",t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},N=async t=>{e&&p?await (0,d.setDocument)(l,"events",t.id,t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},j=async(t,a)=>{e&&p?await (0,d.updateDocument)(l,"events",t,a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},D=async t=>{e&&p?await (0,d.deleteDocument)(l,"events",t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")};return{courses:s,shifts:c,events:_,loading:f,canEdit:p,addCourse:T,updateCourse:b,deleteCourse:C,addWorkShift:S,updateWorkShift:v,deleteWorkShift:x,addEvent:N,updateEvent:j,deleteEvent:D}}e.s(["useScheduleData",()=>s],93475)},70175,e=>{e.v({actionButton:"Loading-module__y6bZ0W__actionButton",emptyContainer:"Loading-module__y6bZ0W__emptyContainer",emptyIcon:"Loading-module__y6bZ0W__emptyIcon",emptyMessage:"Loading-module__y6bZ0W__emptyMessage",emptyTitle:"Loading-module__y6bZ0W__emptyTitle",errorContainer:"Loading-module__y6bZ0W__errorContainer",errorIcon:"Loading-module__y6bZ0W__errorIcon",errorMessage:"Loading-module__y6bZ0W__errorMessage",errorTitle:"Loading-module__y6bZ0W__errorTitle",loadingContainer:"Loading-module__y6bZ0W__loadingContainer",loadingSubtext:"Loading-module__y6bZ0W__loadingSubtext",loadingText:"Loading-module__y6bZ0W__loadingText",retryButton:"Loading-module__y6bZ0W__retryButton",spin:"Loading-module__y6bZ0W__spin",spinner:"Loading-module__y6bZ0W__spinner"})},94e3,e=>{"use strict";var t=e.i(43476),a=e.i(70175);function n({text:e="è¼‰å…¥ä¸­...",subtext:n}){return(0,t.jsxs)("div",{className:a.default.loadingContainer,children:[(0,t.jsx)("div",{className:a.default.spinner}),(0,t.jsx)("div",{className:a.default.loadingText,children:e}),n&&(0,t.jsx)("div",{className:a.default.loadingSubtext,children:n})]})}e.s(["LoadingSpinner",()=>n])},50901,e=>{e.v({buttonGroup:"WorkShiftEditor-module__FaUwMW__buttonGroup",cancelButton:"WorkShiftEditor-module__FaUwMW__cancelButton",closeButton:"WorkShiftEditor-module__FaUwMW__closeButton",colorPicker:"WorkShiftEditor-module__FaUwMW__colorPicker",dialog:"WorkShiftEditor-module__FaUwMW__dialog",fadeIn:"WorkShiftEditor-module__FaUwMW__fadeIn",form:"WorkShiftEditor-module__FaUwMW__form",formGroup:"WorkShiftEditor-module__FaUwMW__formGroup",formRow:"WorkShiftEditor-module__FaUwMW__formRow",header:"WorkShiftEditor-module__FaUwMW__header",overlay:"WorkShiftEditor-module__FaUwMW__overlay",required:"WorkShiftEditor-module__FaUwMW__required",saveButton:"WorkShiftEditor-module__FaUwMW__saveButton",slideUp:"WorkShiftEditor-module__FaUwMW__slideUp"})},97922,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(50901);function i({isOpen:e,onClose:i,onSave:r,shift:d,mode:o}){let[l,s]=(0,a.useState)({date:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"18:00",note:""});(0,a.useEffect)(()=>{d&&"edit"===o?s(d):"add"===o&&s({date:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"18:00",note:""})},[d,o]),(0,a.useEffect)(()=>{if(!e)return;let t=e=>{"Escape"===e.key&&(e.preventDefault(),i())};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,i]);let u=(e,t)=>{s(a=>({...a,[e]:t}))};return e?(0,t.jsx)("div",{className:n.default.overlay,onClick:i,children:(0,t.jsxs)("div",{className:`glass ${n.default.dialog}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:n.default.header,children:[(0,t.jsx)("h2",{children:"add"===o?"æ–°å¢žæ‰“å·¥ç­è¡¨":"ç·¨è¼¯æ‰“å·¥ç­è¡¨"}),(0,t.jsx)("button",{className:n.default.closeButton,onClick:i,children:"âœ•"})]}),(0,t.jsxs)("form",{onSubmit:e=>{(e.preventDefault(),l.date&&l.startTime&&l.endTime)?l.startTime&&l.endTime&&l.startTime>=l.endTime?alert("çµæŸæ™‚é–“å¿…é ˆæ™šæ–¼é–‹å§‹æ™‚é–“"):(r({id:d?.id||`shift-${Date.now()}`,date:l.date,startTime:l.startTime,endTime:l.endTime,note:l.note}),i()):alert("è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½")},className:n.default.form,children:[(0,t.jsxs)("div",{className:n.default.formGroup,children:[(0,t.jsxs)("label",{htmlFor:"date",children:["æ—¥æœŸ ",(0,t.jsx)("span",{className:n.default.required,children:"*"})]}),(0,t.jsx)("input",{id:"date",type:"date",value:l.date,onChange:e=>u("date",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:n.default.formRow,children:[(0,t.jsxs)("div",{className:n.default.formGroup,children:[(0,t.jsxs)("label",{htmlFor:"startTime",children:["é–‹å§‹æ™‚é–“ ",(0,t.jsx)("span",{className:n.default.required,children:"*"})]}),(0,t.jsx)("input",{id:"startTime",type:"time",value:l.startTime,onChange:e=>u("startTime",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:n.default.formGroup,children:[(0,t.jsxs)("label",{htmlFor:"endTime",children:["çµæŸæ™‚é–“ ",(0,t.jsx)("span",{className:n.default.required,children:"*"})]}),(0,t.jsx)("input",{id:"endTime",type:"time",value:l.endTime,onChange:e=>u("endTime",e.target.value),required:!0})]})]}),(0,t.jsxs)("div",{className:n.default.formGroup,children:[(0,t.jsx)("label",{htmlFor:"note",children:"å‚™è¨»"}),(0,t.jsx)("input",{id:"note",type:"text",value:l.note,onChange:e=>u("note",e.target.value),placeholder:"ä¾‹å¦‚ï¼šå†¬ä»¤ç‡ŸåŠ©æ•™"})]}),(0,t.jsxs)("div",{className:n.default.buttonGroup,children:[(0,t.jsx)("button",{type:"button",className:`btn ${n.default.cancelButton}`,onClick:i,children:"å–æ¶ˆ"}),(0,t.jsx)("button",{type:"submit",className:`btn ${n.default.saveButton}`,children:"add"===o?"æ–°å¢ž":"å„²å­˜"})]})]})]})}):null}e.s(["default",()=>i])},21163,e=>{e.v({calendarContainer:"page-module__wKMnra__calendarContainer",cancelButton:"page-module__wKMnra__cancelButton",dayCell:"page-module__wKMnra__dayCell",dayCellDragOver:"page-module__wKMnra__dayCellDragOver",dayCellEmpty:"page-module__wKMnra__dayCellEmpty",dayCellSelected:"page-module__wKMnra__dayCellSelected",dayCellWithShift:"page-module__wKMnra__dayCellWithShift",dayNumber:"page-module__wKMnra__dayNumber",dayNumberEmpty:"page-module__wKMnra__dayNumberEmpty",dayNumberWithShift:"page-module__wKMnra__dayNumberWithShift",daysGrid:"page-module__wKMnra__daysGrid",detailsSection:"page-module__wKMnra__detailsSection",emptyCell:"page-module__wKMnra__emptyCell",hint:"page-module__wKMnra__hint",hints:"page-module__wKMnra__hints",multiSelectActions:"page-module__wKMnra__multiSelectActions",multiSelectBar:"page-module__wKMnra__multiSelectBar",multiSelectInfo:"page-module__wKMnra__multiSelectInfo",pageContainer:"page-module__wKMnra__pageContainer",sectionTitle:"page-module__wKMnra__sectionTitle",selectedOverlay:"page-module__wKMnra__selectedOverlay",shiftBadge:"page-module__wKMnra__shiftBadge",shiftCard:"page-module__wKMnra__shiftCard",shiftCardNormal:"page-module__wKMnra__shiftCardNormal",shiftCardSelected:"page-module__wKMnra__shiftCardSelected",shiftDate:"page-module__wKMnra__shiftDate",shiftDetails:"page-module__wKMnra__shiftDetails",shiftName:"page-module__wKMnra__shiftName",shiftTime:"page-module__wKMnra__shiftTime",shiftsGrid:"page-module__wKMnra__shiftsGrid",templateButton:"page-module__wKMnra__templateButton",weekdayLabel:"page-module__wKMnra__weekdayLabel",weekdaysGrid:"page-module__wKMnra__weekdaysGrid"})},45858,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(93475),i=e.i(32341),r=e.i(34759),d=e.i(97922),o=e.i(94e3),l=e.i(21163);let s=[{name:"ç§‹å­£ç­",startTime:"09:00",endTime:"18:00",note:"ç§‹å­£ç­"},{name:"å†¬ä»¤ç‡ŸåŠ©æ•™",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{name:"åŠå¤©ç­ (ä¸Šåˆ)",startTime:"09:00",endTime:"13:00",note:"åŠå¤©ç­"},{name:"åŠå¤©ç­ (ä¸‹åˆ)",startTime:"13:00",endTime:"18:00",note:"åŠå¤©ç­"}];function u(){let{user:e,loading:u}=(0,i.useAuth)(),{shifts:c,addWorkShift:m}=(0,n.useScheduleData)(),{currentMonth:_,selectedDate:h,changeMonth:f,getDaysInMonth:g,getShiftsForDate:p,currentMonthShifts:y,handleDateClick:w}=function(e){let[t,n]=(0,a.useState)(new Date),[i,r]=(0,a.useState)(null),d=(0,a.useRef)(null),o=(0,a.useMemo)(()=>{let t=new Map;return e.forEach(e=>{t.has(e.date)||t.set(e.date,[]),t.get(e.date).push(e)}),t},[e]),l=(0,a.useMemo)(()=>e.filter(e=>{let a=new Date(e.date);return a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()}).sort((e,t)=>e.date.localeCompare(t.date)),[t,e]);return(0,a.useEffect)(()=>{if(d.current){let e=document.querySelector(`[data-date="${d.current}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"center"}),d.current=null}},[i]),{currentMonth:t,selectedDate:i,changeMonth:e=>{n(new Date(t.getFullYear(),t.getMonth()+e,1))},getDaysInMonth:e=>{let t=e.getFullYear(),a=e.getMonth(),n=new Date(t,a+1,0).getDate(),i=new Date(t,a,1).getDay();return{days:n,startDay:0===i?6:i-1}},getShiftsForDate:e=>{let a=t.getFullYear(),n=t.getMonth()+1,i=`${a}-${n.toString().padStart(2,"0")}-${e.toString().padStart(2,"0")}`;return o.get(i)||[]},currentMonthShifts:l,handleDateClick:e=>{let a=t.getFullYear(),n=t.getMonth()+1,i=`${a}-${n.toString().padStart(2,"0")}-${e.toString().padStart(2,"0")}`;r(i),d.current=i}}}(c),{days:T,startDay:b}=g(_),[C,S]=(0,a.useState)(null),[v,x]=(0,a.useState)(null),[N,j]=(0,a.useState)([]),[D,M]=(0,a.useState)(!1),[W,k]=(0,a.useState)(!1),[E,F]=(0,a.useState)("add"),[B,G]=(0,a.useState)(null);if(u)return(0,t.jsx)(o.LoadingSpinner,{});if(!e)return(0,t.jsx)(r.default,{});let $=e=>{let t=_.getFullYear(),a=_.getMonth()+1;return`${t}-${a.toString().padStart(2,"0")}-${e.toString().padStart(2,"0")}`},K=()=>{x(null)};return(0,t.jsxs)("div",{className:l.default.pageContainer,children:[(0,t.jsx)("div",{className:`glass ${l.default.calendarContainer}`,children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"calendar-header",children:[(0,t.jsx)("button",{onClick:()=>f(-1),className:"btn",style:{background:"rgba(255,255,255,0.3)",color:"white"},children:"â† ä¸Šå€‹æœˆ"}),(0,t.jsxs)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:[_.getFullYear()," å¹´ ",_.getMonth()+1," æœˆ"]}),(0,t.jsx)("button",{onClick:()=>f(1),className:"btn",style:{background:"rgba(255,255,255,0.3)",color:"white"},children:"ä¸‹å€‹æœˆ â†’"})]}),D&&(0,t.jsxs)("div",{className:l.default.multiSelectBar,children:[(0,t.jsxs)("div",{className:l.default.multiSelectInfo,children:["å·²é¸æ“‡ ",N.length," å€‹æ—¥æœŸ"]}),(0,t.jsxs)("div",{className:l.default.multiSelectActions,children:[(0,t.jsx)("button",{className:`btn ${l.default.templateButton}`,onClick:()=>{0===N.length?alert("è«‹å…ˆé¸æ“‡æ—¥æœŸï¼ˆæŒ‰ä½ Ctrl é»žæ“Šå¤šå€‹ç©ºç™½æ—¥æœŸï¼‰"):(F("batch"),k(!0))},children:"ðŸ“ æ‰¹æ¬¡æ–°å¢ž"}),s.map((e,a)=>(0,t.jsxs)("button",{className:`btn ${l.default.templateButton}`,onClick:()=>{0===N.length?alert("è«‹å…ˆé¸æ“‡æ—¥æœŸï¼ˆæŒ‰ä½ Ctrl é»žæ“Šå¤šå€‹ç©ºç™½æ—¥æœŸï¼‰"):confirm(`ç¢ºå®šè¦å°‡ã€Œ${e.name}ã€å¥—ç”¨åˆ° ${N.length} å€‹æ—¥æœŸå—Žï¼Ÿ`)&&(N.forEach(t=>{m({id:`shift-${Date.now()}-${Math.random()}-${t}`,date:$(t),startTime:e.startTime,endTime:e.endTime,note:e.note})}),j([]),M(!1))},children:["âš¡ ",e.name]},a)),(0,t.jsx)("button",{className:`btn ${l.default.cancelButton}`,onClick:()=>{j([]),M(!1)},children:"å–æ¶ˆ"})]})]}),(0,t.jsxs)("div",{className:l.default.hints,children:[(0,t.jsx)("span",{className:l.default.hint,children:"ðŸ’¡ æ‹–æ›³ç­æ¬¡åˆ°å…¶ä»–æ—¥æœŸå¯å¿«é€Ÿè¤‡è£½"}),(0,t.jsx)("span",{className:l.default.hint,children:"ðŸ’¡ æŒ‰ä½ Ctrl é»žæ“Šå¤šå€‹ç©ºç™½æ—¥æœŸå¯æ‰¹æ¬¡æ–°å¢ž"}),(0,t.jsx)("span",{className:l.default.hint,children:"ðŸ’¡ é»žæ“Šç©ºç™½æ—¥æœŸå¯æ–°å¢žå–®ä¸€ç­æ¬¡"})]}),(0,t.jsx)("div",{className:l.default.weekdaysGrid,children:["ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","æ—¥"].map(e=>(0,t.jsx)("div",{className:l.default.weekdayLabel,children:e},e))}),(0,t.jsxs)("div",{className:l.default.daysGrid,children:[Array.from({length:b}).map((e,a)=>(0,t.jsx)("div",{className:l.default.emptyCell},`empty-${a}`)),Array.from({length:T}).map((e,a)=>{let n=a+1,i=p(n),r=i.length>0,d=N.includes(n),o=v===n;return(0,t.jsxs)("div",{onClick:e=>((e,t)=>{let a=p(e);if(t.ctrlKey||t.metaKey){if(t.preventDefault(),a.length>0)return;M(!0),N.includes(e)?j(N.filter(t=>t!==e)):j([...N,e])}else a.length>0?w(e):(G($(e)),F("add"),k(!0))})(n,e),onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy",x(n)},onDragLeave:K,onDrop:e=>((e,t)=>{if(t.preventDefault(),x(null),!C)return;let a=$(e);p(e).length>0?alert("æ­¤æ—¥æœŸå·²æœ‰ç­æ¬¡ï¼Œç„¡æ³•è¤‡è£½"):(m({id:`shift-${Date.now()}-${Math.random()}`,date:a,startTime:C.startTime,endTime:C.endTime,note:C.note}),S(null))})(n,e),className:`${l.default.dayCell} ${r?l.default.dayCellWithShift:l.default.dayCellEmpty} ${d?l.default.dayCellSelected:""} ${o?l.default.dayCellDragOver:""} ${r?"card":""}`,style:{cursor:r?"pointer":"default"},children:[(0,t.jsx)("div",{className:`${l.default.dayNumber} ${r?l.default.dayNumberWithShift:l.default.dayNumberEmpty}`,children:n}),i.map(e=>(0,t.jsx)("div",{className:l.default.shiftBadge,draggable:!0,onDragStart:t=>{S(e),t.dataTransfer.effectAllowed="copy"},children:e.note||"æ‰“å·¥"},e.id)),d&&(0,t.jsx)("div",{className:l.default.selectedOverlay,children:"âœ“"})]},n)})]}),(0,t.jsxs)("div",{className:l.default.detailsSection,children:[(0,t.jsx)("h3",{className:l.default.sectionTitle,children:"æœ¬æœˆè©³ç´°åˆ—è¡¨"}),(0,t.jsx)("div",{className:l.default.shiftsGrid,children:y.map(e=>{let a=h===e.date;return(0,t.jsxs)("div",{"data-date":e.date,className:`${l.default.shiftCard} ${a?l.default.shiftCardSelected:l.default.shiftCardNormal}`,children:[(0,t.jsxs)("div",{className:l.default.shiftDate,children:[e.date.split("-")[2],"æ—¥"]}),(0,t.jsxs)("div",{className:l.default.shiftDetails,children:[(0,t.jsx)("div",{className:l.default.shiftName,children:e.note}),(0,t.jsxs)("div",{className:l.default.shiftTime,children:[e.startTime," - ",e.endTime]})]})]},e.id)})})]})]})}),(0,t.jsx)(d.default,{isOpen:W,onClose:()=>{k(!1),G(null)},onSave:e=>{"add"===E?m(e):"batch"===E&&(N.forEach(t=>{m({id:`shift-${Date.now()}-${Math.random()}-${t}`,date:$(t),startTime:e.startTime,endTime:e.endTime,note:e.note})}),j([]),M(!1))},shift:B?{id:"",date:B,startTime:"09:00",endTime:"18:00",note:""}:null,mode:"add"})]})}e.s(["default",()=>u],45858)}]);