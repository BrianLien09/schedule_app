(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19119,e=>{"use strict";e.i(36180);var t=e.i(98925),o=e.i(59141);function n(e){let t={};for(let[o,n]of Object.entries(e))void 0!==n&&(t[o]=n);return t}function a(e,n){if(!o.isFirebaseConfigured||!o.db)throw Error("Firebase 未設定，請檢查環境變數");return(0,t.collection)(o.db,"shared","data",n)}async function i(e,o,i){let r=a(e,o),s=n({...i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return(await (0,t.addDoc)(r,s)).id}async function r(e,a,i,r){if(!o.isFirebaseConfigured||!o.db)throw Error("Firebase 未設定，請檢查環境變數");let s=(0,t.doc)(o.db,"shared","data",a,i),d=n({...r,updatedAt:new Date().toISOString()});await (0,t.setDoc)(s,d)}async function s(e,o,...n){let i=a(e,o),r=n.length>0?(0,t.query)(i,...n):i;return(await (0,t.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}))}async function d(e,a,i,r){if(!o.isFirebaseConfigured||!o.db)throw Error("Firebase 未設定，請檢查環境變數");let s=(0,t.doc)(o.db,"shared","data",a,i),d=n({...r,updatedAt:new Date().toISOString()});await (0,t.updateDoc)(s,d)}async function c(e,n,a){if(!o.isFirebaseConfigured||!o.db)throw Error("Firebase 未設定，請檢查環境變數");let i=(0,t.doc)(o.db,"shared","data",n,a);await (0,t.deleteDoc)(i)}function u(e,o,n,...i){let r=a(e,o),s=i.length>0?(0,t.query)(r,...i):r;return(0,t.onSnapshot)(s,e=>{n(e.docs.map(e=>({id:e.id,...e.data()})))})}async function l(e,t,o){let n=o.map(o=>{let{id:n,...a}=o;return r(e,t,n,a)});await Promise.all(n)}function m(e){return u("shared","gameGuides",e,(0,t.orderBy)("order","asc"))}async function f(e){return i("shared","gameGuides",e)}async function h(e,t){return d("shared","gameGuides",e,t)}async function p(e){return c("shared","gameGuides",e)}async function w(e){let t=e.map(e=>f(e));await Promise.all(t)}function y(e){return u("shared","courseNotes",e,(0,t.orderBy)("createdAt","desc"))}function T(e,o){return u("shared","courseNotes",o,(0,t.where)("courseId","==",e),(0,t.orderBy)("createdAt","desc"))}async function g(e){return i("shared","courseNotes",e)}async function b(e,t){return d("shared","courseNotes",e,t)}async function D(e){return c("shared","courseNotes",e)}async function C(e,t){return b(e,{completed:t})}async function _(){return(await s("shared","courseNotes",(0,t.where)("completed","==",!1),(0,t.where)("type","in",["homework","exam"]))).filter(e=>e.dueDate).sort((e,t)=>e.dueDate&&t.dueDate?new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime():0)}e.s(["addCourseNote",()=>g,"addGameGuide",()=>f,"batchImportGameGuides",()=>w,"batchSetDocuments",()=>l,"deleteCourseNote",()=>D,"deleteDocument",()=>c,"deleteGameGuide",()=>p,"getDocuments",()=>s,"getIncompleteTasks",()=>_,"setDocument",()=>r,"subscribeToCollection",()=>u,"subscribeToCourseNotes",()=>y,"subscribeToCourseNotesByCourse",()=>T,"subscribeToGameGuides",()=>m,"toggleCourseNoteCompletion",()=>C,"updateCourseNote",()=>b,"updateDocument",()=>d,"updateGameGuide",()=>h])},8437,e=>{e.v({card:"LoginPrompt-module__ERCXna__card",container:"LoginPrompt-module__ERCXna__container",description:"LoginPrompt-module__ERCXna__description",footer:"LoginPrompt-module__ERCXna__footer",googleIcon:"LoginPrompt-module__ERCXna__googleIcon",icon:"LoginPrompt-module__ERCXna__icon",iconWrapper:"LoginPrompt-module__ERCXna__iconWrapper",loginButton:"LoginPrompt-module__ERCXna__loginButton",title:"LoginPrompt-module__ERCXna__title"})},24558,34759,e=>{"use strict";function t(e){return!!e}e.s(["hasWriteAccess",()=>t],24558);var o=e.i(43476),n=e.i(32341),a=e.i(8437);function i(){let{signInWithGoogle:e}=(0,n.useAuth)(),t=async()=>{try{await e()}catch(e){console.error("登入失敗:",e),alert("登入失敗，請稍後再試")}};return(0,o.jsx)("div",{className:a.default.container,children:(0,o.jsxs)("div",{className:a.default.card,children:[(0,o.jsx)("div",{className:a.default.iconWrapper,children:(0,o.jsx)("svg",{className:a.default.icon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,o.jsx)("h2",{className:a.default.title,children:"需要登入"}),(0,o.jsx)("p",{className:a.default.description,children:"請先使用 Google 帳號登入，才能查看課表資料"}),(0,o.jsxs)("button",{onClick:t,className:a.default.loginButton,children:[(0,o.jsxs)("svg",{className:a.default.googleIcon,viewBox:"0 0 24 24",children:[(0,o.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,o.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,o.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,o.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"使用 Google 登入"]}),(0,o.jsx)("p",{className:a.default.footer,children:"僅限授權的家庭成員登入"})]})})}e.s(["default",()=>i],34759)},93475,e=>{"use strict";var t=e.i(71645),o=e.i(32341);let n=[{id:"mon-1",name:"職涯分析與規劃",day:1,startTime:"08:10",endTime:"10:00",location:"博愛CB105D",color:"#FCD34D"},{id:"mon-2",name:"國文(II)：語文表達",day:1,startTime:"10:10",endTime:"12:00",location:"博愛C306",color:"#FB923C"},{id:"mon-3",name:"數位電子學",day:1,startTime:"13:10",endTime:"16:00",location:"博愛G313",color:"#A78BFA"},{id:"tue-1",name:"網際網路概論",day:2,startTime:"08:10",endTime:"10:00",location:"博愛G512電腦教室",color:"#60A5FA"},{id:"tue-2",name:"大學生活學習與輔導",day:2,startTime:"13:10",endTime:"15:00",location:"博愛G313",color:"#F9A8D4"},{id:"wed-1",name:"英文(II)",day:3,startTime:"08:10",endTime:"10:00",location:"博愛C608",color:"#34D399"},{id:"wed-2",name:"羽球",day:3,startTime:"10:10",endTime:"12:00",location:"博愛公誠樓籃球場",color:"#F87171"},{id:"wed-3",name:"資料結構",day:3,startTime:"15:10",endTime:"18:00",location:"博愛G513電腦教室",color:"#818CF8"},{id:"fri-1",name:"民歌與吉他",day:5,startTime:"08:10",endTime:"10:00",location:"博愛M304",color:"#2DD4BF"},{id:"fri-2",name:"Python資料視覺化",day:5,startTime:"10:10",endTime:"12:00",location:"博愛G521電腦教室",color:"#A3E635"},{id:"fri-3",name:"C程式設計",day:5,startTime:"13:10",endTime:"16:00",location:"博愛G512電腦教室",color:"#FB7185"}],a=[{id:"aut-1",date:"2026-01-11",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"aut-2",date:"2026-01-17",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"aut-3",date:"2026-01-18",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"win-1",date:"2026-01-27",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-2",date:"2026-01-29",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-3",date:"2026-02-02",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-4",date:"2026-02-04",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-5",date:"2026-02-05",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-6",date:"2026-02-06",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-7",date:"2026-02-09",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-8",date:"2026-02-10",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-9",date:"2026-02-11",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-10",date:"2026-02-13",startTime:"09:00",endTime:"18:00",note:"冬令營助教"}],i=[{id:"sel-1",title:"志願序結果查詢 & 本班選課",date:"2026-01-05",description:"09:00 查詢結果 / 19:00 開始選課",type:"deadline"},{id:"sel-2",title:"本系選課 (含輔雙)",date:"2026-01-06",description:"19:00 開始",type:"deadline"},{id:"sel-3",title:"跨系/跨班選課",date:"2026-01-08",description:"19:00 開始",type:"deadline"},{id:"sel-4",title:"全校網路加退選",date:"2026-02-23",description:"上午 10:00 開始",type:"deadline"},{id:"sel-5",title:"人工加退選",date:"2026-03-02",description:"上午 09:00 開始",type:"personal"}];var r=e.i(19119),s=e.i(24558);let d="shared";function c(){let{user:e}=(0,o.useAuth)(),[c,u]=(0,t.useState)([]),[l,m]=(0,t.useState)([]),[f,h]=(0,t.useState)([]),[p,w]=(0,t.useState)(!0),[y,T]=(0,t.useState)(!1),g=async()=>{try{let e=await (0,r.getDocuments)(d,"courses"),t=await (0,r.getDocuments)(d,"workShifts"),o=await (0,r.getDocuments)(d,"events");0===e.length&&await (0,r.batchSetDocuments)(d,"courses",n),0===t.length&&await (0,r.batchSetDocuments)(d,"workShifts",a),0===o.length&&await (0,r.batchSetDocuments)(d,"events",i)}catch(e){console.error("❌ 初始化預設資料失敗:",e)}};(0,t.useEffect)(()=>{if(!e){u([]),m([]),h([]),w(!1),T(!1);return}w(!0),T((0,s.hasWriteAccess)(e.email)),g().then(()=>{w(!1)});let t=(0,r.subscribeToCollection)(d,"courses",e=>u(e)),o=(0,r.subscribeToCollection)(d,"workShifts",e=>m(e)),n=(0,r.subscribeToCollection)(d,"events",e=>h(e));return()=>{t(),o(),n()}},[e]);let b=async t=>{e&&y?await (0,r.setDocument)(d,"courses",t.id,t):console.warn("❌ 無編輯權限")},D=async(t,o)=>{e&&y?await (0,r.updateDocument)(d,"courses",t,o):console.warn("❌ 無編輯權限")},C=async t=>{e&&y?await (0,r.deleteDocument)(d,"courses",t):console.warn("❌ 無編輯權限")},_=async t=>{e&&y?await (0,r.setDocument)(d,"workShifts",t.id,t):console.warn("❌ 無編輯權限")},v=async(t,o)=>{e&&y?await (0,r.updateDocument)(d,"workShifts",t,o):console.warn("❌ 無編輯權限")},S=async t=>{e&&y?await (0,r.deleteDocument)(d,"workShifts",t):console.warn("❌ 無編輯權限")},G=async t=>{e&&y?await (0,r.setDocument)(d,"events",t.id,t):console.warn("❌ 無編輯權限")},N=async(t,o)=>{e&&y?await (0,r.updateDocument)(d,"events",t,o):console.warn("❌ 無編輯權限")},j=async t=>{e&&y?await (0,r.deleteDocument)(d,"events",t):console.warn("❌ 無編輯權限")};return{courses:c,shifts:l,events:f,loading:p,canEdit:y,addCourse:b,updateCourse:D,deleteCourse:C,addWorkShift:_,updateWorkShift:v,deleteWorkShift:S,addEvent:G,updateEvent:N,deleteEvent:j}}e.s(["useScheduleData",()=>c],93475)},10160,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},48503,e=>{e.v(e=>Promise.resolve().then(()=>e(15833)))},70653,e=>{e.v(t=>Promise.all(["static/chunks/90fdd386fff6c4e1.js"].map(t=>e.l(t))).then(()=>t(24154)))},95111,e=>{e.v(t=>Promise.all(["static/chunks/cca5a266ceb00b0d.js"].map(t=>e.l(t))).then(()=>t(38201)))}]);