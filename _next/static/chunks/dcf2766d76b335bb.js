(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93475,19119,e=>{"use strict";var t=e.i(71645),i=e.i(32341);let a=[{id:"mon-1",name:"職涯分析與規劃",day:1,startTime:"08:10",endTime:"10:00",location:"博愛CB105D",color:"#fca5a5"},{id:"mon-2",name:"國文(II)：語文表達",day:1,startTime:"10:10",endTime:"12:00",location:"博愛C306",color:"#fda4af"},{id:"mon-3",name:"數位電子學",day:1,startTime:"13:10",endTime:"16:00",location:"博愛G313",color:"var(--color-primary)"},{id:"tue-1",name:"網際網路概論",day:2,startTime:"08:10",endTime:"10:00",location:"博愛G512電腦教室",color:"#fdba74"},{id:"tue-2",name:"大學生活學習與輔導",day:2,startTime:"13:10",endTime:"15:00",location:"博愛G313",color:"var(--color-highlight)"},{id:"wed-1",name:"英文(II)",day:3,startTime:"08:10",endTime:"10:00",location:"博愛C608",color:"#86efac"},{id:"wed-2",name:"羽球",day:3,startTime:"10:10",endTime:"12:00",location:"博愛公誠樓籃球場",color:"#bef264"},{id:"wed-3",name:"資料結構",day:3,startTime:"15:10",endTime:"18:00",location:"博愛G513電腦教室",color:"var(--color-secondary)"},{id:"fri-1",name:"民歌與吉他",day:5,startTime:"08:10",endTime:"10:00",location:"博愛M304",color:"#93c5fd"},{id:"fri-2",name:"Python資料視覺化",day:5,startTime:"10:10",endTime:"12:00",location:"博愛G521電腦教室",color:"#c4b5fd"},{id:"fri-3",name:"C程式設計",day:5,startTime:"13:10",endTime:"16:00",location:"博愛G512電腦教室",color:"#a78bfa"}],o=[{id:"aut-1",date:"2026-01-11",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"aut-2",date:"2026-01-17",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"aut-3",date:"2026-01-18",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"win-1",date:"2026-01-27",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-2",date:"2026-01-29",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-3",date:"2026-02-02",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-4",date:"2026-02-04",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-5",date:"2026-02-05",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-6",date:"2026-02-06",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-7",date:"2026-02-09",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-8",date:"2026-02-10",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-9",date:"2026-02-11",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-10",date:"2026-02-13",startTime:"09:00",endTime:"18:00",note:"冬令營助教"}],r=[{id:"sel-1",title:"志願序結果查詢 & 本班選課",date:"2026-01-05",description:"09:00 查詢結果 / 19:00 開始選課",type:"deadline"},{id:"sel-2",title:"本系選課 (含輔雙)",date:"2026-01-06",description:"19:00 開始",type:"deadline"},{id:"sel-3",title:"跨系/跨班選課",date:"2026-01-08",description:"19:00 開始",type:"deadline"},{id:"sel-4",title:"全校網路加退選",date:"2026-02-23",description:"上午 10:00 開始",type:"deadline"},{id:"sel-5",title:"人工加退選",date:"2026-03-02",description:"上午 09:00 開始",type:"personal"}];e.i(36180);var s=e.i(98925),n=e.i(59141);function d(e,t){return(0,s.collection)(n.db,"users",e,t)}async function l(e,t,i,a){let o=(0,s.doc)(n.db,"users",e,t,i);await (0,s.setDoc)(o,{...a,updatedAt:new Date().toISOString()})}async function c(e,t,...i){let a=d(e,t),o=i.length>0?(0,s.query)(a,...i):a;return(await (0,s.getDocs)(o)).docs.map(e=>({id:e.id,...e.data()}))}async function u(e,t,i,a){let o=(0,s.doc)(n.db,"users",e,t,i);await (0,s.updateDoc)(o,{...a,updatedAt:new Date().toISOString()})}async function m(e,t,i){let a=(0,s.doc)(n.db,"users",e,t,i);await (0,s.deleteDoc)(a)}function f(e,t,i,...a){let o=d(e,t),r=a.length>0?(0,s.query)(o,...a):o;return(0,s.onSnapshot)(r,e=>{i(e.docs.map(e=>({id:e.id,...e.data()})))})}async function S(e,t,i){let a=i.map(i=>{let{id:a,...o}=i;return l(e,t,a,o)});await Promise.all(a)}function y(){let{user:e}=(0,i.useAuth)(),[s,n]=(0,t.useState)([]),[d,y]=(0,t.useState)([]),[h,g]=(0,t.useState)([]),[w,T]=(0,t.useState)(!0),p=async e=>{try{if(localStorage.getItem("firestore_migrated"))return;let t=localStorage.getItem("schedule_courses"),i=localStorage.getItem("schedule_workShifts"),a=localStorage.getItem("schedule_events");if(t){let i=JSON.parse(t);await S(e,"courses",i)}if(i){let t=JSON.parse(i);await S(e,"workShifts",t)}if(a){let t=JSON.parse(a);await S(e,"events",t)}localStorage.setItem("firestore_migrated","true"),console.log("✅ 資料已成功遷移至 Firestore")}catch(e){console.error("❌ 資料遷移失敗:",e)}},I=async e=>{try{let t=await c(e,"courses"),i=await c(e,"workShifts"),s=await c(e,"events");0===t.length&&await S(e,"courses",a),0===i.length&&await S(e,"workShifts",o),0===s.length&&await S(e,"events",r)}catch(e){console.error("❌ 初始化預設資料失敗:",e)}};(0,t.useEffect)(()=>{if(!e){T(!0);let e=localStorage.getItem("schedule_courses"),t=localStorage.getItem("schedule_workShifts"),i=localStorage.getItem("schedule_events");n(e?JSON.parse(e):a),y(t?JSON.parse(t):o),g(i?JSON.parse(i):r),T(!1);return}let t=e.uid;T(!0),p(t).then(()=>I(t)).then(()=>{T(!1)});let i=f(t,"courses",e=>n(e)),s=f(t,"workShifts",e=>y(e)),d=f(t,"events",e=>g(e));return()=>{i(),s(),d()}},[e]);let v=async t=>{if(!e){let e=[...s,t];n(e),localStorage.setItem("schedule_courses",JSON.stringify(e));return}await l(e.uid,"courses",t.id,t)},b=async(t,i)=>{if(!e){let e=s.map(e=>e.id===t?{...e,...i}:e);n(e),localStorage.setItem("schedule_courses",JSON.stringify(e));return}await u(e.uid,"courses",t,i)},O=async t=>{if(!e){let e=s.filter(e=>e.id!==t);n(e),localStorage.setItem("schedule_courses",JSON.stringify(e));return}await m(e.uid,"courses",t)},_=async t=>{if(!e){let e=[...d,t];y(e),localStorage.setItem("schedule_workShifts",JSON.stringify(e));return}await l(e.uid,"workShifts",t.id,t)},J=async(t,i)=>{if(!e){let e=d.map(e=>e.id===t?{...e,...i}:e);y(e),localStorage.setItem("schedule_workShifts",JSON.stringify(e));return}await u(e.uid,"workShifts",t,i)},N=async t=>{if(!e){let e=d.filter(e=>e.id!==t);y(e),localStorage.setItem("schedule_workShifts",JSON.stringify(e));return}await m(e.uid,"workShifts",t)},k=async t=>{if(!e){let e=[...h,t];g(e),localStorage.setItem("schedule_events",JSON.stringify(e));return}await l(e.uid,"events",t.id,t)},D=async(t,i)=>{if(!e){let e=h.map(e=>e.id===t?{...e,...i}:e);g(e),localStorage.setItem("schedule_events",JSON.stringify(e));return}await u(e.uid,"events",t,i)},C=async t=>{if(!e){let e=h.filter(e=>e.id!==t);g(e),localStorage.setItem("schedule_events",JSON.stringify(e));return}await m(e.uid,"events",t)};return{courses:s,shifts:d,events:h,loading:w,addCourse:v,updateCourse:b,deleteCourse:O,addWorkShift:_,updateWorkShift:J,deleteWorkShift:N,addEvent:k,updateEvent:D,deleteEvent:C,resetToDefault:async()=>{if(!e){n(a),y(o),g(r),localStorage.setItem("schedule_courses",JSON.stringify(a)),localStorage.setItem("schedule_workShifts",JSON.stringify(o)),localStorage.setItem("schedule_events",JSON.stringify(r));return}await S(e.uid,"courses",a),await S(e.uid,"workShifts",o),await S(e.uid,"events",r)}}}e.s(["batchSetDocuments",()=>S,"deleteDocument",()=>m,"getDocuments",()=>c,"setDocument",()=>l,"subscribeToCollection",()=>f,"updateDocument",()=>u],19119),e.s(["useScheduleData",()=>y],93475)},10160,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},48503,e=>{e.v(e=>Promise.resolve().then(()=>e(15833)))},70653,e=>{e.v(t=>Promise.all(["static/chunks/90fdd386fff6c4e1.js"].map(t=>e.l(t))).then(()=>t(24154)))},95111,e=>{e.v(t=>Promise.all(["static/chunks/cca5a266ceb00b0d.js"].map(t=>e.l(t))).then(()=>t(38201)))}]);