(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19119,e=>{"use strict";e.i(36180);var t=e.i(98925),a=e.i(59141);function n(e){let t={};for(let[a,n]of Object.entries(e))void 0!==n&&(t[a]=n);return t}function i(e,n){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");return(0,t.collection)(a.db,"shared","data",n)}async function d(e,a,d){let l=i(e,a),r=n({...d,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return(await (0,t.addDoc)(l,r)).id}async function l(e,i,d,l){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let r=(0,t.doc)(a.db,"shared","data",i,d),o=n({...l,updatedAt:new Date().toISOString()});await (0,t.setDoc)(r,o)}async function r(e,a,...n){let d=i(e,a),l=n.length>0?(0,t.query)(d,...n):d;return(await (0,t.getDocs)(l)).docs.map(e=>({id:e.id,...e.data()}))}async function o(e,i,d,l){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let r=(0,t.doc)(a.db,"shared","data",i,d),o=n({...l,updatedAt:new Date().toISOString()});await (0,t.updateDoc)(r,o)}async function s(e,n,i){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let d=(0,t.doc)(a.db,"shared","data",n,i);await (0,t.deleteDoc)(d)}function u(e,a,n,...d){let l=i(e,a),r=d.length>0?(0,t.query)(l,...d):l;return(0,t.onSnapshot)(r,e=>{n(e.docs.map(e=>({id:e.id,...e.data()})))})}async function c(e,t,a){let n=a.map(a=>{let{id:n,...i}=a;return l(e,t,n,i)});await Promise.all(n)}function m(e){return u("shared","gameGuides",e,(0,t.orderBy)("order","asc"))}async function _(e){return d("shared","gameGuides",e)}async function h(e,t){return o("shared","gameGuides",e,t)}async function f(e){return s("shared","gameGuides",e)}async function g(e){let t=e.map(e=>_(e));await Promise.all(t)}e.s(["addGameGuide",()=>_,"batchImportGameGuides",()=>g,"batchSetDocuments",()=>c,"deleteDocument",()=>s,"deleteGameGuide",()=>f,"getDocuments",()=>r,"setDocument",()=>l,"subscribeToCollection",()=>u,"subscribeToGameGuides",()=>m,"updateDocument",()=>o,"updateGameGuide",()=>h])},8437,e=>{e.v({card:"LoginPrompt-module__ERCXna__card",container:"LoginPrompt-module__ERCXna__container",description:"LoginPrompt-module__ERCXna__description",footer:"LoginPrompt-module__ERCXna__footer",googleIcon:"LoginPrompt-module__ERCXna__googleIcon",icon:"LoginPrompt-module__ERCXna__icon",iconWrapper:"LoginPrompt-module__ERCXna__iconWrapper",loginButton:"LoginPrompt-module__ERCXna__loginButton",title:"LoginPrompt-module__ERCXna__title"})},93475,24558,34759,e=>{"use strict";var t=e.i(71645),a=e.i(32341);let n=[{id:"mon-1",name:"è·æ¶¯åˆ†æžèˆ‡è¦åŠƒ",day:1,startTime:"08:10",endTime:"10:00",location:"åšæ„›CB105D",color:"#6EE7B7"},{id:"mon-2",name:"åœ‹æ–‡(II)ï¼šèªžæ–‡è¡¨é”",day:1,startTime:"10:10",endTime:"12:00",location:"åšæ„›C306",color:"#5EEAD4"},{id:"mon-3",name:"æ•¸ä½é›»å­å­¸",day:1,startTime:"13:10",endTime:"16:00",location:"åšæ„›G313",color:"#0891B2"},{id:"tue-1",name:"ç¶²éš›ç¶²è·¯æ¦‚è«–",day:2,startTime:"08:10",endTime:"10:00",location:"åšæ„›G512é›»è…¦æ•™å®¤",color:"#22D3EE"},{id:"tue-2",name:"å¤§å­¸ç”Ÿæ´»å­¸ç¿’èˆ‡è¼”å°Ž",day:2,startTime:"13:10",endTime:"15:00",location:"åšæ„›G313",color:"#A5F3FC"},{id:"wed-1",name:"è‹±æ–‡(II)",day:3,startTime:"08:10",endTime:"10:00",location:"åšæ„›C608",color:"#34D399"},{id:"wed-2",name:"ç¾½çƒ",day:3,startTime:"10:10",endTime:"12:00",location:"åšæ„›å…¬èª æ¨“ç±ƒçƒå ´",color:"#10B981"},{id:"wed-3",name:"è³‡æ–™çµæ§‹",day:3,startTime:"15:10",endTime:"18:00",location:"åšæ„›G513é›»è…¦æ•™å®¤",color:"#059669"},{id:"fri-1",name:"æ°‘æ­Œèˆ‡å‰ä»–",day:5,startTime:"08:10",endTime:"10:00",location:"åšæ„›M304",color:"#67E8F9"},{id:"fri-2",name:"Pythonè³‡æ–™è¦–è¦ºåŒ–",day:5,startTime:"10:10",endTime:"12:00",location:"åšæ„›G521é›»è…¦æ•™å®¤",color:"#06B6D4"},{id:"fri-3",name:"Cç¨‹å¼è¨­è¨ˆ",day:5,startTime:"13:10",endTime:"16:00",location:"åšæ„›G512é›»è…¦æ•™å®¤",color:"#0E7490"}],i=[{id:"aut-1",date:"2026-01-11",startTime:"09:00",endTime:"18:00",note:"ç§‹å­£ç­"},{id:"aut-2",date:"2026-01-17",startTime:"09:00",endTime:"18:00",note:"ç§‹å­£ç­"},{id:"aut-3",date:"2026-01-18",startTime:"09:00",endTime:"18:00",note:"ç§‹å­£ç­"},{id:"win-1",date:"2026-01-27",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-2",date:"2026-01-29",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-3",date:"2026-02-02",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-4",date:"2026-02-04",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-5",date:"2026-02-05",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-6",date:"2026-02-06",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-7",date:"2026-02-09",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-8",date:"2026-02-10",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-9",date:"2026-02-11",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-10",date:"2026-02-13",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"}],d=[{id:"sel-1",title:"å¿—é¡˜åºçµæžœæŸ¥è©¢ & æœ¬ç­é¸èª²",date:"2026-01-05",description:"09:00 æŸ¥è©¢çµæžœ / 19:00 é–‹å§‹é¸èª²",type:"deadline"},{id:"sel-2",title:"æœ¬ç³»é¸èª² (å«è¼”é›™)",date:"2026-01-06",description:"19:00 é–‹å§‹",type:"deadline"},{id:"sel-3",title:"è·¨ç³»/è·¨ç­é¸èª²",date:"2026-01-08",description:"19:00 é–‹å§‹",type:"deadline"},{id:"sel-4",title:"å…¨æ ¡ç¶²è·¯åŠ é€€é¸",date:"2026-02-23",description:"ä¸Šåˆ 10:00 é–‹å§‹",type:"deadline"},{id:"sel-5",title:"äººå·¥åŠ é€€é¸",date:"2026-03-02",description:"ä¸Šåˆ 09:00 é–‹å§‹",type:"personal"}];var l=e.i(19119);function r(e){return!!e}e.s(["hasWriteAccess",()=>r],24558);let o="shared";function s(){let{user:e}=(0,a.useAuth)(),[r,s]=(0,t.useState)([]),[u,c]=(0,t.useState)([]),[m,_]=(0,t.useState)([]),[h,f]=(0,t.useState)(!0),[g,p]=(0,t.useState)(!1),y=async()=>{try{let e=await (0,l.getDocuments)(o,"courses"),t=await (0,l.getDocuments)(o,"workShifts"),a=await (0,l.getDocuments)(o,"events");0===e.length&&await (0,l.batchSetDocuments)(o,"courses",n),0===t.length&&await (0,l.batchSetDocuments)(o,"workShifts",i),0===a.length&&await (0,l.batchSetDocuments)(o,"events",d)}catch(e){console.error("âŒ åˆå§‹åŒ–é è¨­è³‡æ–™å¤±æ•—:",e)}};(0,t.useEffect)(()=>{if(!e){s([]),c([]),_([]),f(!1),p(!1);return}f(!0),p(!!e.email),y().then(()=>{f(!1)});let t=(0,l.subscribeToCollection)(o,"courses",e=>s(e)),a=(0,l.subscribeToCollection)(o,"workShifts",e=>c(e)),n=(0,l.subscribeToCollection)(o,"events",e=>_(e));return()=>{t(),a(),n()}},[e]);let w=async t=>{e&&g?await (0,l.setDocument)(o,"courses",t.id,t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},T=async(t,a)=>{e&&g?await (0,l.updateDocument)(o,"courses",t,a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},S=async t=>{e&&g?await (0,l.deleteDocument)(o,"courses",t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},b=async t=>{e&&g?await (0,l.setDocument)(o,"workShifts",t.id,t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},v=async(t,a)=>{e&&g?await (0,l.updateDocument)(o,"workShifts",t,a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},C=async t=>{e&&g?await (0,l.deleteDocument)(o,"workShifts",t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},x=async t=>{e&&g?await (0,l.setDocument)(o,"events",t.id,t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},j=async(t,a)=>{e&&g?await (0,l.updateDocument)(o,"events",t,a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},N=async t=>{e&&g?await (0,l.deleteDocument)(o,"events",t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")};return{courses:r,shifts:u,events:m,loading:h,canEdit:g,addCourse:w,updateCourse:T,deleteCourse:S,addWorkShift:b,updateWorkShift:v,deleteWorkShift:C,addEvent:x,updateEvent:j,deleteEvent:N}}e.s(["useScheduleData",()=>s],93475);var u=e.i(43476),c=e.i(8437);function m(){let{signInWithGoogle:e}=(0,a.useAuth)(),t=async()=>{try{await e()}catch(e){console.error("ç™»å…¥å¤±æ•—:",e),alert("ç™»å…¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}};return(0,u.jsx)("div",{className:c.default.container,children:(0,u.jsxs)("div",{className:c.default.card,children:[(0,u.jsx)("div",{className:c.default.iconWrapper,children:(0,u.jsx)("svg",{className:c.default.icon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,u.jsx)("h2",{className:c.default.title,children:"éœ€è¦ç™»å…¥"}),(0,u.jsx)("p",{className:c.default.description,children:"è«‹å…ˆä½¿ç”¨ Google å¸³è™Ÿç™»å…¥ï¼Œæ‰èƒ½æŸ¥çœ‹èª²è¡¨è³‡æ–™"}),(0,u.jsxs)("button",{onClick:t,className:c.default.loginButton,children:[(0,u.jsxs)("svg",{className:c.default.googleIcon,viewBox:"0 0 24 24",children:[(0,u.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,u.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,u.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,u.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"ä½¿ç”¨ Google ç™»å…¥"]}),(0,u.jsx)("p",{className:c.default.footer,children:"åƒ…é™æŽˆæ¬Šçš„å®¶åº­æˆå“¡ç™»å…¥"})]})})}e.s(["default",()=>m],34759)},70175,e=>{e.v({actionButton:"Loading-module__y6bZ0W__actionButton",emptyContainer:"Loading-module__y6bZ0W__emptyContainer",emptyIcon:"Loading-module__y6bZ0W__emptyIcon",emptyMessage:"Loading-module__y6bZ0W__emptyMessage",emptyTitle:"Loading-module__y6bZ0W__emptyTitle",errorContainer:"Loading-module__y6bZ0W__errorContainer",errorIcon:"Loading-module__y6bZ0W__errorIcon",errorMessage:"Loading-module__y6bZ0W__errorMessage",errorTitle:"Loading-module__y6bZ0W__errorTitle",loadingContainer:"Loading-module__y6bZ0W__loadingContainer",loadingSubtext:"Loading-module__y6bZ0W__loadingSubtext",loadingText:"Loading-module__y6bZ0W__loadingText",retryButton:"Loading-module__y6bZ0W__retryButton",spin:"Loading-module__y6bZ0W__spin",spinner:"Loading-module__y6bZ0W__spinner"})},94e3,e=>{"use strict";var t=e.i(43476),a=e.i(70175);function n({text:e="è¼‰å…¥ä¸­...",subtext:n}){return(0,t.jsxs)("div",{className:a.default.loadingContainer,children:[(0,t.jsx)("div",{className:a.default.spinner}),(0,t.jsx)("div",{className:a.default.loadingText,children:e}),n&&(0,t.jsx)("div",{className:a.default.loadingSubtext,children:n})]})}e.s(["LoadingSpinner",()=>n])},50901,e=>{e.v({buttonGroup:"WorkShiftEditor-module__FaUwMW__buttonGroup",cancelButton:"WorkShiftEditor-module__FaUwMW__cancelButton",closeButton:"WorkShiftEditor-module__FaUwMW__closeButton",colorPicker:"WorkShiftEditor-module__FaUwMW__colorPicker",dialog:"WorkShiftEditor-module__FaUwMW__dialog",fadeIn:"WorkShiftEditor-module__FaUwMW__fadeIn",form:"WorkShiftEditor-module__FaUwMW__form",formGroup:"WorkShiftEditor-module__FaUwMW__formGroup",formRow:"WorkShiftEditor-module__FaUwMW__formRow",header:"WorkShiftEditor-module__FaUwMW__header",overlay:"WorkShiftEditor-module__FaUwMW__overlay",required:"WorkShiftEditor-module__FaUwMW__required",saveButton:"WorkShiftEditor-module__FaUwMW__saveButton",slideUp:"WorkShiftEditor-module__FaUwMW__slideUp"})},97922,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(50901);function i({isOpen:e,onClose:i,onSave:d,shift:l,mode:r}){let[o,s]=(0,a.useState)({date:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"18:00",note:""});(0,a.useEffect)(()=>{l&&"edit"===r?s(l):"add"===r&&s({date:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"18:00",note:""})},[l,r]),(0,a.useEffect)(()=>{if(!e)return;let t=e=>{"Escape"===e.key&&(e.preventDefault(),i())};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,i]);let u=(e,t)=>{s(a=>({...a,[e]:t}))};return e?(0,t.jsx)("div",{className:n.default.overlay,onClick:i,children:(0,t.jsxs)("div",{className:`glass ${n.default.dialog}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:n.default.header,children:[(0,t.jsx)("h2",{children:"add"===r?"æ–°å¢žæ‰“å·¥ç­è¡¨":"ç·¨è¼¯æ‰“å·¥ç­è¡¨"}),(0,t.jsx)("button",{className:n.default.closeButton,onClick:i,children:"âœ•"})]}),(0,t.jsxs)("form",{onSubmit:e=>{(e.preventDefault(),o.date&&o.startTime&&o.endTime)?o.startTime&&o.endTime&&o.startTime>=o.endTime?alert("çµæŸæ™‚é–“å¿…é ˆæ™šæ–¼é–‹å§‹æ™‚é–“"):(d({id:l?.id||`shift-${Date.now()}`,date:o.date,startTime:o.startTime,endTime:o.endTime,note:o.note}),i()):alert("è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½")},className:n.default.form,children:[(0,t.jsxs)("div",{className:n.default.formGroup,children:[(0,t.jsxs)("label",{htmlFor:"date",children:["æ—¥æœŸ ",(0,t.jsx)("span",{className:n.default.required,children:"*"})]}),(0,t.jsx)("input",{id:"date",type:"date",value:o.date,onChange:e=>u("date",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:n.default.formRow,children:[(0,t.jsxs)("div",{className:n.default.formGroup,children:[(0,t.jsxs)("label",{htmlFor:"startTime",children:["é–‹å§‹æ™‚é–“ ",(0,t.jsx)("span",{className:n.default.required,children:"*"})]}),(0,t.jsx)("input",{id:"startTime",type:"time",value:o.startTime,onChange:e=>u("startTime",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:n.default.formGroup,children:[(0,t.jsxs)("label",{htmlFor:"endTime",children:["çµæŸæ™‚é–“ ",(0,t.jsx)("span",{className:n.default.required,children:"*"})]}),(0,t.jsx)("input",{id:"endTime",type:"time",value:o.endTime,onChange:e=>u("endTime",e.target.value),required:!0})]})]}),(0,t.jsxs)("div",{className:n.default.formGroup,children:[(0,t.jsx)("label",{htmlFor:"note",children:"å‚™è¨»"}),(0,t.jsx)("input",{id:"note",type:"text",value:o.note,onChange:e=>u("note",e.target.value),placeholder:"ä¾‹å¦‚ï¼šå†¬ä»¤ç‡ŸåŠ©æ•™"})]}),(0,t.jsxs)("div",{className:n.default.buttonGroup,children:[(0,t.jsx)("button",{type:"button",className:`btn ${n.default.cancelButton}`,onClick:i,children:"å–æ¶ˆ"}),(0,t.jsx)("button",{type:"submit",className:`btn ${n.default.saveButton}`,children:"add"===r?"æ–°å¢ž":"å„²å­˜"})]})]})]})}):null}e.s(["default",()=>i])},21163,e=>{e.v({calendarContainer:"page-module__wKMnra__calendarContainer",cancelButton:"page-module__wKMnra__cancelButton",dayCell:"page-module__wKMnra__dayCell",dayCellDragOver:"page-module__wKMnra__dayCellDragOver",dayCellEmpty:"page-module__wKMnra__dayCellEmpty",dayCellSelected:"page-module__wKMnra__dayCellSelected",dayCellWithShift:"page-module__wKMnra__dayCellWithShift",dayNumber:"page-module__wKMnra__dayNumber",dayNumberEmpty:"page-module__wKMnra__dayNumberEmpty",dayNumberWithShift:"page-module__wKMnra__dayNumberWithShift",daysGrid:"page-module__wKMnra__daysGrid",detailsSection:"page-module__wKMnra__detailsSection",emptyCell:"page-module__wKMnra__emptyCell",hint:"page-module__wKMnra__hint",hints:"page-module__wKMnra__hints",multiSelectActions:"page-module__wKMnra__multiSelectActions",multiSelectBar:"page-module__wKMnra__multiSelectBar",multiSelectInfo:"page-module__wKMnra__multiSelectInfo",pageContainer:"page-module__wKMnra__pageContainer",sectionTitle:"page-module__wKMnra__sectionTitle",selectedOverlay:"page-module__wKMnra__selectedOverlay",shiftBadge:"page-module__wKMnra__shiftBadge",shiftCard:"page-module__wKMnra__shiftCard",shiftCardNormal:"page-module__wKMnra__shiftCardNormal",shiftCardSelected:"page-module__wKMnra__shiftCardSelected",shiftDate:"page-module__wKMnra__shiftDate",shiftDetails:"page-module__wKMnra__shiftDetails",shiftName:"page-module__wKMnra__shiftName",shiftTime:"page-module__wKMnra__shiftTime",shiftsGrid:"page-module__wKMnra__shiftsGrid",templateButton:"page-module__wKMnra__templateButton",weekdayLabel:"page-module__wKMnra__weekdayLabel",weekdaysGrid:"page-module__wKMnra__weekdaysGrid"})},45858,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(93475),i=e.i(32341),d=e.i(34759),l=e.i(97922),r=e.i(94e3),o=e.i(21163);let s=[{name:"ç§‹å­£ç­",startTime:"09:00",endTime:"18:00",note:"ç§‹å­£ç­"},{name:"å†¬ä»¤ç‡ŸåŠ©æ•™",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{name:"åŠå¤©ç­ (ä¸Šåˆ)",startTime:"09:00",endTime:"13:00",note:"åŠå¤©ç­"},{name:"åŠå¤©ç­ (ä¸‹åˆ)",startTime:"13:00",endTime:"18:00",note:"åŠå¤©ç­"}];function u(){let{user:e,loading:u}=(0,i.useAuth)(),{shifts:c,addWorkShift:m}=(0,n.useScheduleData)(),{currentMonth:_,selectedDate:h,changeMonth:f,getDaysInMonth:g,getShiftsForDate:p,currentMonthShifts:y,handleDateClick:w}=function(e){let[t,n]=(0,a.useState)(new Date),[i,d]=(0,a.useState)(null),l=(0,a.useRef)(null),r=(0,a.useMemo)(()=>{let t=new Map;return e.forEach(e=>{t.has(e.date)||t.set(e.date,[]),t.get(e.date).push(e)}),t},[e]),o=(0,a.useMemo)(()=>e.filter(e=>{let a=new Date(e.date);return a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()}).sort((e,t)=>e.date.localeCompare(t.date)),[t,e]);return(0,a.useEffect)(()=>{if(l.current){let e=document.querySelector(`[data-date="${l.current}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"center"}),l.current=null}},[i]),{currentMonth:t,selectedDate:i,changeMonth:e=>{n(new Date(t.getFullYear(),t.getMonth()+e,1))},getDaysInMonth:e=>{let t=e.getFullYear(),a=e.getMonth(),n=new Date(t,a+1,0).getDate(),i=new Date(t,a,1).getDay();return{days:n,startDay:0===i?6:i-1}},getShiftsForDate:e=>{let a=t.getFullYear(),n=t.getMonth()+1,i=`${a}-${n.toString().padStart(2,"0")}-${e.toString().padStart(2,"0")}`;return r.get(i)||[]},currentMonthShifts:o,handleDateClick:e=>{let a=t.getFullYear(),n=t.getMonth()+1,i=`${a}-${n.toString().padStart(2,"0")}-${e.toString().padStart(2,"0")}`;d(i),l.current=i}}}(c),{days:T,startDay:S}=g(_),[b,v]=(0,a.useState)(null),[C,x]=(0,a.useState)(null),[j,N]=(0,a.useState)([]),[M,D]=(0,a.useState)(!1),[W,E]=(0,a.useState)(!1),[k,G]=(0,a.useState)("add"),[B,F]=(0,a.useState)(null);if(u)return(0,t.jsx)(r.LoadingSpinner,{});if(!e)return(0,t.jsx)(d.default,{});let $=e=>{let t=_.getFullYear(),a=_.getMonth()+1;return`${t}-${a.toString().padStart(2,"0")}-${e.toString().padStart(2,"0")}`},K=()=>{x(null)};return(0,t.jsxs)("div",{className:o.default.pageContainer,children:[(0,t.jsx)("div",{className:`glass ${o.default.calendarContainer}`,children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"calendar-header",children:[(0,t.jsx)("button",{onClick:()=>f(-1),className:"btn",style:{background:"rgba(255,255,255,0.3)",color:"white"},children:"â† ä¸Šå€‹æœˆ"}),(0,t.jsxs)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:[_.getFullYear()," å¹´ ",_.getMonth()+1," æœˆ"]}),(0,t.jsx)("button",{onClick:()=>f(1),className:"btn",style:{background:"rgba(255,255,255,0.3)",color:"white"},children:"ä¸‹å€‹æœˆ â†’"})]}),M&&(0,t.jsxs)("div",{className:o.default.multiSelectBar,children:[(0,t.jsxs)("div",{className:o.default.multiSelectInfo,children:["å·²é¸æ“‡ ",j.length," å€‹æ—¥æœŸ"]}),(0,t.jsxs)("div",{className:o.default.multiSelectActions,children:[(0,t.jsx)("button",{className:`btn ${o.default.templateButton}`,onClick:()=>{0===j.length?alert("è«‹å…ˆé¸æ“‡æ—¥æœŸï¼ˆæŒ‰ä½ Ctrl é»žæ“Šå¤šå€‹ç©ºç™½æ—¥æœŸï¼‰"):(G("batch"),E(!0))},children:"ðŸ“ æ‰¹æ¬¡æ–°å¢ž"}),s.map((e,a)=>(0,t.jsxs)("button",{className:`btn ${o.default.templateButton}`,onClick:()=>{0===j.length?alert("è«‹å…ˆé¸æ“‡æ—¥æœŸï¼ˆæŒ‰ä½ Ctrl é»žæ“Šå¤šå€‹ç©ºç™½æ—¥æœŸï¼‰"):confirm(`ç¢ºå®šè¦å°‡ã€Œ${e.name}ã€å¥—ç”¨åˆ° ${j.length} å€‹æ—¥æœŸå—Žï¼Ÿ`)&&(j.forEach(t=>{m({id:`shift-${Date.now()}-${Math.random()}-${t}`,date:$(t),startTime:e.startTime,endTime:e.endTime,note:e.note})}),N([]),D(!1))},children:["âš¡ ",e.name]},a)),(0,t.jsx)("button",{className:`btn ${o.default.cancelButton}`,onClick:()=>{N([]),D(!1)},children:"å–æ¶ˆ"})]})]}),(0,t.jsxs)("div",{className:o.default.hints,children:[(0,t.jsx)("span",{className:o.default.hint,children:"ðŸ’¡ æ‹–æ›³ç­æ¬¡åˆ°å…¶ä»–æ—¥æœŸå¯å¿«é€Ÿè¤‡è£½"}),(0,t.jsx)("span",{className:o.default.hint,children:"ðŸ’¡ æŒ‰ä½ Ctrl é»žæ“Šå¤šå€‹ç©ºç™½æ—¥æœŸå¯æ‰¹æ¬¡æ–°å¢ž"}),(0,t.jsx)("span",{className:o.default.hint,children:"ðŸ’¡ é»žæ“Šç©ºç™½æ—¥æœŸå¯æ–°å¢žå–®ä¸€ç­æ¬¡"})]}),(0,t.jsx)("div",{className:o.default.weekdaysGrid,children:["ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","æ—¥"].map(e=>(0,t.jsx)("div",{className:o.default.weekdayLabel,children:e},e))}),(0,t.jsxs)("div",{className:o.default.daysGrid,children:[Array.from({length:S}).map((e,a)=>(0,t.jsx)("div",{className:o.default.emptyCell},`empty-${a}`)),Array.from({length:T}).map((e,a)=>{let n=a+1,i=p(n),d=i.length>0,l=j.includes(n),r=C===n;return(0,t.jsxs)("div",{onClick:e=>((e,t)=>{let a=p(e);if(t.ctrlKey||t.metaKey){if(t.preventDefault(),a.length>0)return;D(!0),j.includes(e)?N(j.filter(t=>t!==e)):N([...j,e])}else a.length>0?w(e):(F($(e)),G("add"),E(!0))})(n,e),onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy",x(n)},onDragLeave:K,onDrop:e=>((e,t)=>{if(t.preventDefault(),x(null),!b)return;let a=$(e);p(e).length>0?alert("æ­¤æ—¥æœŸå·²æœ‰ç­æ¬¡ï¼Œç„¡æ³•è¤‡è£½"):(m({id:`shift-${Date.now()}-${Math.random()}`,date:a,startTime:b.startTime,endTime:b.endTime,note:b.note}),v(null))})(n,e),className:`${o.default.dayCell} ${d?o.default.dayCellWithShift:o.default.dayCellEmpty} ${l?o.default.dayCellSelected:""} ${r?o.default.dayCellDragOver:""} ${d?"card":""}`,style:{cursor:d?"pointer":"default"},children:[(0,t.jsx)("div",{className:`${o.default.dayNumber} ${d?o.default.dayNumberWithShift:o.default.dayNumberEmpty}`,children:n}),i.map(e=>(0,t.jsx)("div",{className:o.default.shiftBadge,draggable:!0,onDragStart:t=>{v(e),t.dataTransfer.effectAllowed="copy"},children:e.note||"æ‰“å·¥"},e.id)),l&&(0,t.jsx)("div",{className:o.default.selectedOverlay,children:"âœ“"})]},n)})]}),(0,t.jsxs)("div",{className:o.default.detailsSection,children:[(0,t.jsx)("h3",{className:o.default.sectionTitle,children:"æœ¬æœˆè©³ç´°åˆ—è¡¨"}),(0,t.jsx)("div",{className:o.default.shiftsGrid,children:y.map(e=>{let a=h===e.date;return(0,t.jsxs)("div",{"data-date":e.date,className:`${o.default.shiftCard} ${a?o.default.shiftCardSelected:o.default.shiftCardNormal}`,children:[(0,t.jsxs)("div",{className:o.default.shiftDate,children:[e.date.split("-")[2],"æ—¥"]}),(0,t.jsxs)("div",{className:o.default.shiftDetails,children:[(0,t.jsx)("div",{className:o.default.shiftName,children:e.note}),(0,t.jsxs)("div",{className:o.default.shiftTime,children:[e.startTime," - ",e.endTime]})]})]},e.id)})})]})]})}),(0,t.jsx)(l.default,{isOpen:W,onClose:()=>{E(!1),F(null)},onSave:e=>{"add"===k?m(e):"batch"===k&&(j.forEach(t=>{m({id:`shift-${Date.now()}-${Math.random()}-${t}`,date:$(t),startTime:e.startTime,endTime:e.endTime,note:e.note})}),N([]),D(!1))},shift:B?{id:"",date:B,startTime:"09:00",endTime:"18:00",note:""}:null,mode:"add"})]})}e.s(["default",()=>u],45858)}]);