(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93475,19119,e=>{"use strict";var t=e.i(71645),i=e.i(32341);let a=[{id:"mon-1",name:"職涯分析與規劃",day:1,startTime:"08:10",endTime:"10:00",location:"博愛CB105D",color:"#fca5a5"},{id:"mon-2",name:"國文(II)：語文表達",day:1,startTime:"10:10",endTime:"12:00",location:"博愛C306",color:"#fda4af"},{id:"mon-3",name:"數位電子學",day:1,startTime:"13:10",endTime:"16:00",location:"博愛G313",color:"var(--color-primary)"},{id:"tue-1",name:"網際網路概論",day:2,startTime:"08:10",endTime:"10:00",location:"博愛G512電腦教室",color:"#fdba74"},{id:"tue-2",name:"大學生活學習與輔導",day:2,startTime:"13:10",endTime:"15:00",location:"博愛G313",color:"var(--color-highlight)"},{id:"wed-1",name:"英文(II)",day:3,startTime:"08:10",endTime:"10:00",location:"博愛C608",color:"#86efac"},{id:"wed-2",name:"羽球",day:3,startTime:"10:10",endTime:"12:00",location:"博愛公誠樓籃球場",color:"#bef264"},{id:"wed-3",name:"資料結構",day:3,startTime:"15:10",endTime:"18:00",location:"博愛G513電腦教室",color:"var(--color-secondary)"},{id:"fri-1",name:"民歌與吉他",day:5,startTime:"08:10",endTime:"10:00",location:"博愛M304",color:"#93c5fd"},{id:"fri-2",name:"Python資料視覺化",day:5,startTime:"10:10",endTime:"12:00",location:"博愛G521電腦教室",color:"#c4b5fd"},{id:"fri-3",name:"C程式設計",day:5,startTime:"13:10",endTime:"16:00",location:"博愛G512電腦教室",color:"#a78bfa"}],r=[{id:"aut-1",date:"2026-01-11",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"aut-2",date:"2026-01-17",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"aut-3",date:"2026-01-18",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"win-1",date:"2026-01-27",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-2",date:"2026-01-29",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-3",date:"2026-02-02",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-4",date:"2026-02-04",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-5",date:"2026-02-05",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-6",date:"2026-02-06",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-7",date:"2026-02-09",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-8",date:"2026-02-10",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-9",date:"2026-02-11",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-10",date:"2026-02-13",startTime:"09:00",endTime:"18:00",note:"冬令營助教"}],n=[{id:"sel-1",title:"志願序結果查詢 & 本班選課",date:"2026-01-05",description:"09:00 查詢結果 / 19:00 開始選課",type:"deadline"},{id:"sel-2",title:"本系選課 (含輔雙)",date:"2026-01-06",description:"19:00 開始",type:"deadline"},{id:"sel-3",title:"跨系/跨班選課",date:"2026-01-08",description:"19:00 開始",type:"deadline"},{id:"sel-4",title:"全校網路加退選",date:"2026-02-23",description:"上午 10:00 開始",type:"deadline"},{id:"sel-5",title:"人工加退選",date:"2026-03-02",description:"上午 09:00 開始",type:"personal"}];e.i(36180);var d=e.i(98925),s=e.i(59141);function o(e,t){return(0,d.collection)(s.db,"users",e,t)}async function l(e,t,i,a){let r=(0,d.doc)(s.db,"users",e,t,i);await (0,d.setDoc)(r,{...a,updatedAt:new Date().toISOString()})}async function c(e,t,...i){let a=o(e,t),r=i.length>0?(0,d.query)(a,...i):a;return(await (0,d.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}))}async function m(e,t,i,a){let r=(0,d.doc)(s.db,"users",e,t,i);await (0,d.updateDoc)(r,{...a,updatedAt:new Date().toISOString()})}async function u(e,t,i){let a=(0,d.doc)(s.db,"users",e,t,i);await (0,d.deleteDoc)(a)}function f(e,t,i,...a){let r=o(e,t),n=a.length>0?(0,d.query)(r,...a):r;return(0,d.onSnapshot)(n,e=>{i(e.docs.map(e=>({id:e.id,...e.data()})))})}async function g(e,t,i){let a=i.map(i=>{let{id:a,...r}=i;return l(e,t,a,r)});await Promise.all(a)}function h(){let{user:e}=(0,i.useAuth)(),[d,s]=(0,t.useState)([]),[o,h]=(0,t.useState)([]),[y,S]=(0,t.useState)([]),[p,w]=(0,t.useState)(!0),T=async e=>{try{if(localStorage.getItem("firestore_migrated"))return;let t=localStorage.getItem("schedule_courses"),i=localStorage.getItem("schedule_workShifts"),a=localStorage.getItem("schedule_events");if(t){let i=JSON.parse(t);await g(e,"courses",i)}if(i){let t=JSON.parse(i);await g(e,"workShifts",t)}if(a){let t=JSON.parse(a);await g(e,"events",t)}localStorage.setItem("firestore_migrated","true"),console.log("✅ 資料已成功遷移至 Firestore")}catch(e){console.error("❌ 資料遷移失敗:",e)}},x=async e=>{try{let t=await c(e,"courses"),i=await c(e,"workShifts"),d=await c(e,"events");0===t.length&&await g(e,"courses",a),0===i.length&&await g(e,"workShifts",r),0===d.length&&await g(e,"events",n)}catch(e){console.error("❌ 初始化預設資料失敗:",e)}};(0,t.useEffect)(()=>{if(!e){w(!0);let e=localStorage.getItem("schedule_courses"),t=localStorage.getItem("schedule_workShifts"),i=localStorage.getItem("schedule_events");s(e?JSON.parse(e):a),h(t?JSON.parse(t):r),S(i?JSON.parse(i):n),w(!1);return}let t=e.uid;w(!0),T(t).then(()=>x(t)).then(()=>{w(!1)});let i=f(t,"courses",e=>s(e)),d=f(t,"workShifts",e=>h(e)),o=f(t,"events",e=>S(e));return()=>{i(),d(),o()}},[e]);let b=async t=>{if(!e){let e=[...d,t];s(e),localStorage.setItem("schedule_courses",JSON.stringify(e));return}await l(e.uid,"courses",t.id,t)},v=async(t,i)=>{if(!e){let e=d.map(e=>e.id===t?{...e,...i}:e);s(e),localStorage.setItem("schedule_courses",JSON.stringify(e));return}await m(e.uid,"courses",t,i)},I=async t=>{if(!e){let e=d.filter(e=>e.id!==t);s(e),localStorage.setItem("schedule_courses",JSON.stringify(e));return}await u(e.uid,"courses",t)},O=async t=>{if(!e){let e=[...o,t];h(e),localStorage.setItem("schedule_workShifts",JSON.stringify(e));return}await l(e.uid,"workShifts",t.id,t)},k=async(t,i)=>{if(!e){let e=o.map(e=>e.id===t?{...e,...i}:e);h(e),localStorage.setItem("schedule_workShifts",JSON.stringify(e));return}await m(e.uid,"workShifts",t,i)},_=async t=>{if(!e){let e=o.filter(e=>e.id!==t);h(e),localStorage.setItem("schedule_workShifts",JSON.stringify(e));return}await u(e.uid,"workShifts",t)},j=async t=>{if(!e){let e=[...y,t];S(e),localStorage.setItem("schedule_events",JSON.stringify(e));return}await l(e.uid,"events",t.id,t)},N=async(t,i)=>{if(!e){let e=y.map(e=>e.id===t?{...e,...i}:e);S(e),localStorage.setItem("schedule_events",JSON.stringify(e));return}await m(e.uid,"events",t,i)},D=async t=>{if(!e){let e=y.filter(e=>e.id!==t);S(e),localStorage.setItem("schedule_events",JSON.stringify(e));return}await u(e.uid,"events",t)};return{courses:d,shifts:o,events:y,loading:p,addCourse:b,updateCourse:v,deleteCourse:I,addWorkShift:O,updateWorkShift:k,deleteWorkShift:_,addEvent:j,updateEvent:N,deleteEvent:D,resetToDefault:async()=>{if(!e){s(a),h(r),S(n),localStorage.setItem("schedule_courses",JSON.stringify(a)),localStorage.setItem("schedule_workShifts",JSON.stringify(r)),localStorage.setItem("schedule_events",JSON.stringify(n));return}await g(e.uid,"courses",a),await g(e.uid,"workShifts",r),await g(e.uid,"events",n)}}}e.s(["batchSetDocuments",()=>g,"deleteDocument",()=>u,"getDocuments",()=>c,"setDocument",()=>l,"subscribeToCollection",()=>f,"updateDocument",()=>m],19119),e.s(["useScheduleData",()=>h],93475)},38995,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(93475);function r(){let{courses:e}=(0,a.useScheduleData)(),r=[{id:1,label:"第 1 節",time:"0810-0900",start:"08:10",end:"09:00"},{id:2,label:"第 2 節",time:"0910-1000",start:"09:10",end:"10:00"},{id:3,label:"第 3 節",time:"1010-1100",start:"10:10",end:"11:00"},{id:4,label:"第 4 節",time:"1110-1200",start:"11:10",end:"12:00"},{id:5,label:"第 5 節",time:"1210-1300",start:"12:10",end:"13:00"},{id:6,label:"第 6 節",time:"1310-1400",start:"13:10",end:"14:00"},{id:7,label:"第 7 節",time:"1410-1500",start:"14:10",end:"15:00"},{id:8,label:"第 8 節",time:"1510-1600",start:"15:10",end:"16:00"},{id:9,label:"第 9 節",time:"1610-1700",start:"16:10",end:"17:00"},{id:10,label:"第 10 節",time:"1710-1800",start:"17:10",end:"18:00"}];return(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:(0,t.jsx)("div",{className:"glass",style:{padding:"1.5rem",minHeight:"600px"},children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem",textAlign:"center"},children:"大一下學期課表"}),(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("div",{style:{minWidth:"600px",display:"grid",gridTemplateColumns:"minmax(100px, auto) repeat(5, 1fr)",gap:"1px",backgroundColor:"var(--glass-border)"},children:[(0,t.jsx)("div",{style:{padding:"0.25rem",background:"rgba(255,255,255,0.5)",textAlign:"center"}}),["一","二","三","四","五"].map(e=>(0,t.jsxs)("div",{style:{padding:"0.25rem",background:"rgba(255,255,255,0.5)",textAlign:"center",fontWeight:"bold",fontSize:"0.9rem"},children:["週",e]},e)),r.map(a=>(0,t.jsxs)(i.Fragment,{children:[(0,t.jsxs)("div",{style:{padding:"0.1rem",textAlign:"center",fontSize:"0.8rem",background:"rgba(255,255,255,0.3)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"48px",borderRight:"1px solid rgba(0,0,0,0.05)"},children:[(0,t.jsx)("div",{style:{marginBottom:"0px",whiteSpace:"nowrap",fontWeight:"bold"},children:a.label}),(0,t.jsx)("div",{style:{fontSize:"0.65rem",opacity:.8,lineHeight:"1"},children:a.time.replace("-","\n")})]}),Array.from({length:5}).map((i,n)=>{let d,s=n+1,o=(d=a.start,e.find(e=>e.day===s&&e.startTime===d));if(e.some(e=>{if(e.day!==s)return!1;let t=r.findIndex(t=>t.start===e.startTime),i=r.findIndex(t=>t.end===e.endTime);-1===i&&"18:00"===e.endTime&&(i=9);let n=r.findIndex(e=>e.id===a.id);return n>t&&n<=i}))return null;if(o){var l,c;let e,i,n=(l=o.startTime,c=o.endTime,e=r.findIndex(e=>e.start===l),i=r.findIndex(e=>e.end===c),-1!==e&&-1!==i?i-e+1:1);return(0,t.jsxs)("div",{style:{gridRow:`span ${n}`,backgroundColor:o.color,color:"#1f2937",padding:"0.25rem",margin:"2px",borderRadius:"6px",fontSize:"0.9rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",zIndex:1,position:"relative"},children:[(0,t.jsx)("div",{style:{fontWeight:"bold",marginBottom:"2px",textAlign:"center",lineHeight:"1.2",fontSize:"1rem",textShadow:"0 1px 2px rgba(255,255,255,0.5)"},children:o.name}),(0,t.jsx)("div",{style:{fontSize:"0.85rem",fontWeight:"bold",opacity:.9,textShadow:"0 1px 1px rgba(255,255,255,0.4)"},children:o.location})]},`${s}-${a.id}`)}return(0,t.jsx)("div",{style:{background:"rgba(255,255,255,0.1)",borderBottom:"1px solid rgba(255,255,255,0.2)"}},`${s}-${a.id}`)})]},a.id))]})})]})})})}e.s(["default",()=>r])}]);