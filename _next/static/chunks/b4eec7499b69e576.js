(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19119,e=>{"use strict";e.i(36180);var t=e.i(98925),r=e.i(59141);function s(e){let t={};for(let[r,s]of Object.entries(e))void 0!==s&&(t[r]=s);return t}function a(e,s){if(!r.isFirebaseConfigured||!r.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");return(0,t.collection)(r.db,"shared","data",s)}async function i(e,r,i){let n=a(e,r),o=s({...i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return(await (0,t.addDoc)(n,o)).id}async function n(e,a,i,n){if(!r.isFirebaseConfigured||!r.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let o=(0,t.doc)(r.db,"shared","data",a,i),d=s({...n,updatedAt:new Date().toISOString()});await (0,t.setDoc)(o,d)}async function o(e,r,...s){let i=a(e,r),n=s.length>0?(0,t.query)(i,...s):i;return(await (0,t.getDocs)(n)).docs.map(e=>({id:e.id,...e.data()}))}async function d(e,a,i,n){if(!r.isFirebaseConfigured||!r.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let o=(0,t.doc)(r.db,"shared","data",a,i),d=s({...n,updatedAt:new Date().toISOString()});await (0,t.updateDoc)(o,d)}async function c(e,s,a){if(!r.isFirebaseConfigured||!r.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let i=(0,t.doc)(r.db,"shared","data",s,a);await (0,t.deleteDoc)(i)}function l(e,r,s,...i){let n=a(e,r),o=i.length>0?(0,t.query)(n,...i):n;return(0,t.onSnapshot)(o,e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))})}async function u(e,t,r){let s=r.map(r=>{let{id:s,...a}=r;return n(e,t,s,a)});await Promise.all(s)}function m(e){return l("shared","gameGuides",e,(0,t.orderBy)("order","asc"))}async function h(e){return i("shared","gameGuides",e)}async function p(e,t){return d("shared","gameGuides",e,t)}async function g(e){return c("shared","gameGuides",e)}async function w(e){let t=e.map(e=>h(e));await Promise.all(t)}function f(e){return l("shared","courseNotes",e,(0,t.orderBy)("createdAt","desc"))}function _(e,r){return l("shared","courseNotes",r,(0,t.where)("courseId","==",e),(0,t.orderBy)("createdAt","desc"))}async function v(e){return i("shared","courseNotes",e)}async function b(e,t){return d("shared","courseNotes",e,t)}async function C(e){return c("shared","courseNotes",e)}async function j(e,t){return b(e,{completed:t})}async function D(){return(await o("shared","courseNotes",(0,t.where)("completed","==",!1),(0,t.where)("type","in",["homework","exam"]))).filter(e=>e.dueDate).sort((e,t)=>e.dueDate&&t.dueDate?new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime():0)}e.s(["addCourseNote",()=>v,"addGameGuide",()=>h,"batchImportGameGuides",()=>w,"batchSetDocuments",()=>u,"deleteCourseNote",()=>C,"deleteDocument",()=>c,"deleteGameGuide",()=>g,"getDocuments",()=>o,"getIncompleteTasks",()=>D,"setDocument",()=>n,"subscribeToCollection",()=>l,"subscribeToCourseNotes",()=>f,"subscribeToCourseNotesByCourse",()=>_,"subscribeToGameGuides",()=>m,"toggleCourseNoteCompletion",()=>j,"updateCourseNote",()=>b,"updateDocument",()=>d,"updateGameGuide",()=>p])},85204,e=>{"use strict";let t=[{id:"reverse-1999",name:"é‡è¿”æœªä¾†ï¼š1999",icon:"ðŸŒ§ï¸",versions:[{version:"3.1",characters:[{name:"é‡Žæ¨¹èŽ“",resonanceCode:"AjwAPBD8BToEJiAkITFSMVRMZkxGMzQ5QTRQSDRIQA=="},{name:"å‘Šæ­»é³¥",resonanceCode:"ASoAKAE8IEFQQVL0Q0hlKUVDMiQELRQmJEUwOUA="}],links:[{id:"v31-1",title:"ã€è§’è‰²ã€‘é‡Žæ¨¹èŽ“ - è–ªè¡€éšŠæœ€å¾Œä¸€å¡Šæ‹¼åœ–",url:"https://www.taptap.cn/moment/718173987636514461",description:"å…­æ˜Ÿ æœ¨å±¬æ€§ è¼”åŠ©"},{id:"v31-2",title:"ã€è§’è‰²ã€‘å‘Šæ­»é³¥ - é›»èƒ½éšŠæ ¸æ–°Cï¼Œé•·è»¸ä¹‹ç¥ž",url:"https://www.taptap.cn/moment/725428213244758184",description:"å…­æ˜Ÿ æ™ºå±¬æ€§ è¼¸å‡º"},{id:"v31-3",title:"ã€æ´»å‹•ã€‘å†·éµ - å…¨é€šé—œæ”»ç•¥",url:"https://www.taptap.cn/moment/725281520306094345",description:"ç‰ˆæœ¬æ´»å‹• é™æ™‚é ˜å–"}]},{version:"3.2",characters:[{name:"è²éº—çˆ¾",resonanceCode:"AjhFNAI0ADwgPDA6BCkFK0QrQPQkRENBUkBB"},{name:"ç°èª¿è—",resonanceCode:"ATwAPBAmUDhC8CQ0FTREKFQqBCQhQSBDQEQy"}],links:[{id:"v32-1",title:"ã€è§’è‰²ã€‘è²éº—çˆ¾ - é€±å¹´å¤§Cï¼Œé¤˜æš‰éšŠæ ¸å¿ƒ",url:"https://www.taptap.cn/moment/733044921438569435",description:"å…­æ˜Ÿ ç¸å±¬æ€§ è¼¸å‡º"},{id:"v32-2",title:"ã€è§’è‰²ã€‘ç°èª¿è— - æ–°æ™‚ä»£é›»èƒ½éšŠæ–°è¼”C",url:"https://www.taptap.cn/moment/740636166335759363",description:"äº”æ˜Ÿ æ˜Ÿå±¬æ€§ è¼”åŠ©"},{id:"v32-3",title:"ã€ä¸ŠåŠæ´»å‹•ã€‘å‘½é‹çš„é›¨å­£ - å…¨é€šé—œæ”»ç•¥",url:"https://www.taptap.cn/moment/732909496178839006",description:"3.2 ä¸ŠåŠç‰ˆæœ¬æ´»å‹•"},{id:"v32-4",title:"ã€ä¸‹åŠæ´»å‹•ã€‘ç„¡ç‡’ - å…¨é€šé—œæ”»ç•¥",url:"https://www.taptap.cn/moment/740466917403265017",description:"3.2 ä¸‹åŠç‰ˆæœ¬æ´»å‹•"}]},{version:"3.3",characters:[{name:"ç‘ªçˆ¾ç´—",resonanceCode:"BTwAPBA0IDQiKgQpFfA0QyQ7VDpDQVFEUENBTEA="},{name:"ä¼Šæˆˆçˆ¾",resonanceCode:"AfQkNAE9ACYhNEA8YCpCOVMoEjgFKgMnRQ=="}],links:[{id:"v33-1",title:"ã€è§’è‰²ã€‘ç‘ªçˆ¾ç´— - é¤˜æš‰éšŠçš„èŠ±ç’°ï¼Œè·¨æ™‚ä»£çš„ç›¾å¥¶",url:"https://www.taptap.cn/moment/748259688637795101",description:"å…­æ˜Ÿ å²©å±¬æ€§ é˜²ç¦¦"},{id:"v33-2",title:"ã€è§’è‰²ã€‘ä¼Šæˆˆçˆ¾ - æ–°æ‰‹é¤ŠæˆæŒ‡å—",url:"https://www.taptap.cn/moment/755855972479533766",description:"äº”æ˜Ÿ æœ¨å±¬æ€§ è¼¸å‡º"},{id:"v33-3",title:"ã€ä¸ŠåŠæ´»å‹•ã€‘ä»¥é¨Žå£«ä¹‹å - å…¨é€šé—œæ”»ç•¥",url:"https://www.taptap.cn/moment/748127427296759347",description:"3.3 ä¸ŠåŠç‰ˆæœ¬æ´»å‹•"},{id:"v33-4",title:"ã€ä¸‹åŠæ´»å‹•ã€‘é¢¨æš´å‰å¤• - å…¨é€šé—œæ”»ç•¥",url:"https://www.taptap.cn/moment/755693322269363732",description:"3.3 ä¸‹åŠç‰ˆæœ¬æ´»å‹•"}]}],links:[{id:"1",title:"Taptap å°ä¸¸çŠŠå‡  - æ”»ç•¥å¤§ä½¬",url:"https://www.taptap.cn/user/8268254"},{id:"2",title:"å®˜æ–¹ç¶²ç«™",url:"https://re1999.bluepoch.com"}]},{id:"hsr",name:"å´©å£žï¼šæ˜Ÿç©¹éµé“",icon:"ðŸš‚",links:[{id:"1",title:"çŽ‰è¡¡æ¯",url:"https://homdgcat.wiki/sr/char?lang=CH",description:"æ‡‚å¾—éƒ½æ‡‚"},{id:"2",title:"æ˜Ÿç©¹éµé“å·¥åŠ",url:"https://www.prydwen.gg/star-rail/",description:"è§’è‰²å¼·åº¦æŽ’è¡Œèˆ‡çµ„éšŠå»ºè­° (è‹±æ–‡)"}]}];e.s(["games",0,t])},43648,e=>{e.v({btnMigrate:"migration-module__cr42rG__btnMigrate",btnViewGuides:"migration-module__cr42rG__btnViewGuides",container:"migration-module__cr42rG__container",errorMessage:"migration-module__cr42rG__errorMessage",header:"migration-module__cr42rG__header",logContainer:"migration-module__cr42rG__logContainer",logContent:"migration-module__cr42rG__logContent",loginPrompt:"migration-module__cr42rG__loginPrompt",statCard:"migration-module__cr42rG__statCard",statLabel:"migration-module__cr42rG__statLabel",statValue:"migration-module__cr42rG__statValue",stats:"migration-module__cr42rG__stats",successMessage:"migration-module__cr42rG__successMessage",warning:"migration-module__cr42rG__warning"})},185,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(32341),a=e.i(85204),i=e.i(19119),n=e.i(43648);function o(){let{user:e}=(0,s.useAuth)(),[o,d]=(0,r.useState)("idle"),[c,l]=(0,r.useState)([]),[u,m]=(0,r.useState)({total:0,success:0,failed:0}),h=e=>{l(t=>[...t,`[${new Date().toLocaleTimeString()}] ${e}`])},p=async()=>{if(!e)return void alert("è«‹å…ˆç™»å…¥");if(!confirm("ç¢ºå®šè¦é–‹å§‹é·ç§»è³‡æ–™å—Žï¼Ÿ\n\né€™æœƒå°‡ games.ts çš„è³‡æ–™åŒ¯å…¥ Firestoreã€‚"))return;d("running"),l([]),m({total:0,success:0,failed:0});let t=[];try{for(let e of(h("ðŸš€ é–‹å§‹è§£æžè³‡æ–™..."),a.games)){for(let r of(h(`
ðŸ“¦ è™•ç†éŠæˆ²ï¼š${e.name} (${e.id})`),e.links)){let s={gameId:e.id,title:r.title,url:r.url,category:"é€šç”¨è³‡æº",priority:3,tags:[],completed:!1,order:Date.now()+t.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.description&&(s.subtitle=r.description),t.push(s),h(`  âœ“ é€šç”¨é€£çµï¼š${r.title}`)}if(e.versions)for(let r of e.versions){for(let s of(h(`  ðŸ“Œ ç‰ˆæœ¬ v${r.version}`),r.characters))s.resonanceCode&&(t.push({gameId:e.id,version:r.version,title:`${s.name} å…±é³´è­œ`,subtitle:`v${r.version} ç‰ˆæœ¬è§’è‰²é…ç½®`,url:"",resonanceCode:s.resonanceCode,category:"è§’è‰²é¤Šæˆ",priority:4,tags:["è§’è‰²é…ç½®"],completed:!1,order:Date.now()+t.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),h(`    â­ è§’è‰²ï¼š${s.name}`));if(r.links)for(let s of r.links){let a={gameId:e.id,version:r.version,title:s.title,url:s.url,category:"è§’è‰²æ”»ç•¥",priority:3,tags:[],completed:!1,order:Date.now()+t.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s.description&&(a.subtitle=s.description),t.push(a),h(`    ðŸ”— é€£çµï¼š${s.title}`)}}}h(`
ðŸ“Š è§£æžå®Œæˆï¼Œå…± ${t.length} ç­†è³‡æ–™`),m(e=>({...e,total:t.length})),h("\nðŸ”„ é–‹å§‹æ‰¹æ¬¡åŒ¯å…¥åˆ° Firestore..."),await (0,i.batchImportGameGuides)(t),m(e=>({...e,success:t.length})),h(`
âœ… é·ç§»å®Œæˆï¼æˆåŠŸåŒ¯å…¥ ${t.length} ç­†è³‡æ–™`),d("success")}catch(e){h(`
âŒ éŒ¯èª¤ï¼š${e instanceof Error?e.message:"æœªçŸ¥éŒ¯èª¤"}`),m(e=>({...e,failed:e.total-e.success})),d("error")}};return e?(0,t.jsxs)("div",{className:n.default.container,children:[(0,t.jsxs)("div",{className:n.default.header,children:[(0,t.jsx)("h1",{children:"ðŸ”„ éŠæˆ²æ”»ç•¥è³‡æ–™é·ç§»å·¥å…·"}),(0,t.jsx)("p",{children:"å°‡ games.ts çš„èˆŠè³‡æ–™åŒ¯å…¥åˆ° Firestore è³‡æ–™åº«"})]}),(0,t.jsxs)("div",{className:n.default.warning,children:[(0,t.jsx)("strong",{children:"âš ï¸ æ³¨æ„äº‹é …"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"æ­¤å·¥å…·åƒ…ç”¨æ–¼åˆæ¬¡è³‡æ–™åŒ¯å…¥"}),(0,t.jsx)("li",{children:"åŸ·è¡Œå‰è«‹ç¢ºèª Firestore Security Rules å·²æ­£ç¢ºè¨­å®š"}),(0,t.jsx)("li",{children:"é‡è¤‡åŸ·è¡Œæœƒç”¢ç”Ÿé‡è¤‡è³‡æ–™ï¼Œè«‹è¬¹æ…Žä½¿ç”¨"}),(0,t.jsx)("li",{children:"å»ºè­°åœ¨æ¸¬è©¦ç’°å¢ƒå…ˆåŸ·è¡Œç¢ºèªç„¡èª¤"})]})]}),(0,t.jsxs)("div",{className:n.default.stats,children:[(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statValue,children:u.total}),(0,t.jsx)("div",{className:n.default.statLabel,children:"ç¸½è¨ˆ"})]}),(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statValue,style:{color:"var(--color-accent)"},children:u.success}),(0,t.jsx)("div",{className:n.default.statLabel,children:"æˆåŠŸ"})]}),(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statValue,style:{color:"#EF4444"},children:u.failed}),(0,t.jsx)("div",{className:n.default.statLabel,children:"å¤±æ•—"})]})]}),(0,t.jsx)("button",{className:n.default.btnMigrate,onClick:p,disabled:"running"===o,children:"running"===o?"é·ç§»ä¸­...":"ðŸš€ é–‹å§‹é·ç§»"}),c.length>0&&(0,t.jsxs)("div",{className:n.default.logContainer,children:[(0,t.jsx)("h3",{children:"åŸ·è¡Œè¨˜éŒ„"}),(0,t.jsx)("pre",{className:n.default.logContent,children:c.map((e,r)=>(0,t.jsx)("div",{children:e},r))})]}),"success"===o&&(0,t.jsxs)("div",{className:n.default.successMessage,children:[(0,t.jsx)("h3",{children:"âœ… é·ç§»å®Œæˆï¼"}),(0,t.jsx)("p",{children:"è«‹å‰å¾€ã€ŒéŠæˆ²æ”»ç•¥ã€é é¢æŸ¥çœ‹åŒ¯å…¥çµæžœã€‚"}),(0,t.jsx)("a",{href:"/games",className:n.default.btnViewGuides,children:"å‰å¾€æŸ¥çœ‹ â†’"})]}),"error"===o&&(0,t.jsxs)("div",{className:n.default.errorMessage,children:[(0,t.jsx)("h3",{children:"âŒ é·ç§»å¤±æ•—"}),(0,t.jsx)("p",{children:"è«‹æª¢æŸ¥åŸ·è¡Œè¨˜éŒ„ä¸­çš„éŒ¯èª¤è¨Šæ¯ï¼Œæˆ–è¯çµ¡é–‹ç™¼è€…ã€‚"})]})]}):(0,t.jsx)("div",{className:n.default.container,children:(0,t.jsxs)("div",{className:n.default.loginPrompt,children:[(0,t.jsx)("h2",{children:"ðŸ”’ è«‹å…ˆç™»å…¥"}),(0,t.jsx)("p",{children:"è³‡æ–™é·ç§»éœ€è¦ç™»å…¥æ¬Šé™"})]})})}e.s(["default",()=>o])}]);