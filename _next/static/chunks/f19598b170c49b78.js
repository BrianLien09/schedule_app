(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8437,e=>{e.v({card:"LoginPrompt-module__ERCXna__card",container:"LoginPrompt-module__ERCXna__container",description:"LoginPrompt-module__ERCXna__description",footer:"LoginPrompt-module__ERCXna__footer",googleIcon:"LoginPrompt-module__ERCXna__googleIcon",icon:"LoginPrompt-module__ERCXna__icon",iconWrapper:"LoginPrompt-module__ERCXna__iconWrapper",loginButton:"LoginPrompt-module__ERCXna__loginButton",title:"LoginPrompt-module__ERCXna__title"})},93475,19119,24558,34759,e=>{"use strict";var t=e.i(71645),a=e.i(32341);let o=[{id:"mon-1",name:"職涯分析與規劃",day:1,startTime:"08:10",endTime:"10:00",location:"博愛CB105D",color:"#fca5a5"},{id:"mon-2",name:"國文(II)：語文表達",day:1,startTime:"10:10",endTime:"12:00",location:"博愛C306",color:"#fda4af"},{id:"mon-3",name:"數位電子學",day:1,startTime:"13:10",endTime:"16:00",location:"博愛G313",color:"var(--color-primary)"},{id:"tue-1",name:"網際網路概論",day:2,startTime:"08:10",endTime:"10:00",location:"博愛G512電腦教室",color:"#fdba74"},{id:"tue-2",name:"大學生活學習與輔導",day:2,startTime:"13:10",endTime:"15:00",location:"博愛G313",color:"var(--color-highlight)"},{id:"wed-1",name:"英文(II)",day:3,startTime:"08:10",endTime:"10:00",location:"博愛C608",color:"#86efac"},{id:"wed-2",name:"羽球",day:3,startTime:"10:10",endTime:"12:00",location:"博愛公誠樓籃球場",color:"#bef264"},{id:"wed-3",name:"資料結構",day:3,startTime:"15:10",endTime:"18:00",location:"博愛G513電腦教室",color:"var(--color-secondary)"},{id:"fri-1",name:"民歌與吉他",day:5,startTime:"08:10",endTime:"10:00",location:"博愛M304",color:"#93c5fd"},{id:"fri-2",name:"Python資料視覺化",day:5,startTime:"10:10",endTime:"12:00",location:"博愛G521電腦教室",color:"#c4b5fd"},{id:"fri-3",name:"C程式設計",day:5,startTime:"13:10",endTime:"16:00",location:"博愛G512電腦教室",color:"#a78bfa"}],i=[{id:"aut-1",date:"2026-01-11",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"aut-2",date:"2026-01-17",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"aut-3",date:"2026-01-18",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"win-1",date:"2026-01-27",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-2",date:"2026-01-29",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-3",date:"2026-02-02",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-4",date:"2026-02-04",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-5",date:"2026-02-05",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-6",date:"2026-02-06",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-7",date:"2026-02-09",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-8",date:"2026-02-10",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-9",date:"2026-02-11",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-10",date:"2026-02-13",startTime:"09:00",endTime:"18:00",note:"冬令營助教"}],n=[{id:"sel-1",title:"志願序結果查詢 & 本班選課",date:"2026-01-05",description:"09:00 查詢結果 / 19:00 開始選課",type:"deadline"},{id:"sel-2",title:"本系選課 (含輔雙)",date:"2026-01-06",description:"19:00 開始",type:"deadline"},{id:"sel-3",title:"跨系/跨班選課",date:"2026-01-08",description:"19:00 開始",type:"deadline"},{id:"sel-4",title:"全校網路加退選",date:"2026-02-23",description:"上午 10:00 開始",type:"deadline"},{id:"sel-5",title:"人工加退選",date:"2026-03-02",description:"上午 09:00 開始",type:"personal"}];e.i(36180);var r=e.i(98925),d=e.i(59141);function s(e,t){if(!d.isFirebaseConfigured||!d.db)throw Error("Firebase 未設定，請檢查環境變數");return(0,r.collection)(d.db,"shared","data",t)}async function c(e,t,a,o){if(!d.isFirebaseConfigured||!d.db)throw Error("Firebase 未設定，請檢查環境變數");let i=(0,r.doc)(d.db,"shared","data",t,a);await (0,r.setDoc)(i,{...o,updatedAt:new Date().toISOString()})}async function l(e,t,...a){let o=s(e,t),i=a.length>0?(0,r.query)(o,...a):o;return(await (0,r.getDocs)(i)).docs.map(e=>({id:e.id,...e.data()}))}async function m(e,t,a,o){if(!d.isFirebaseConfigured||!d.db)throw Error("Firebase 未設定，請檢查環境變數");let i=(0,r.doc)(d.db,"shared","data",t,a);await (0,r.updateDoc)(i,{...o,updatedAt:new Date().toISOString()})}async function u(e,t,a){if(!d.isFirebaseConfigured||!d.db)throw Error("Firebase 未設定，請檢查環境變數");let o=(0,r.doc)(d.db,"shared","data",t,a);await (0,r.deleteDoc)(o)}function f(e,t,a,...o){let i=s(e,t),n=o.length>0?(0,r.query)(i,...o):i;return(0,r.onSnapshot)(n,e=>{a(e.docs.map(e=>({id:e.id,...e.data()})))})}async function h(e,t,a){let o=a.map(a=>{let{id:o,...i}=a;return c(e,t,o,i)});await Promise.all(o)}function p(e){return!!e}e.s(["batchSetDocuments",()=>h,"deleteDocument",()=>u,"getDocuments",()=>l,"setDocument",()=>c,"subscribeToCollection",()=>f,"updateDocument",()=>m],19119),e.s(["hasWriteAccess",()=>p],24558);let w="shared";function y(){let{user:e}=(0,a.useAuth)(),[r,d]=(0,t.useState)([]),[s,p]=(0,t.useState)([]),[y,T]=(0,t.useState)([]),[g,b]=(0,t.useState)(!0),[_,v]=(0,t.useState)(!1),C=async()=>{try{let e=await l(w,"courses"),t=await l(w,"workShifts"),a=await l(w,"events");0===e.length&&await h(w,"courses",o),0===t.length&&await h(w,"workShifts",i),0===a.length&&await h(w,"events",n)}catch(e){console.error("❌ 初始化預設資料失敗:",e)}};(0,t.useEffect)(()=>{if(!e){d([]),p([]),T([]),b(!1),v(!1);return}b(!0),v(!!e.email),C().then(()=>{b(!1)});let t=f(w,"courses",e=>d(e)),a=f(w,"workShifts",e=>p(e)),o=f(w,"events",e=>T(e));return()=>{t(),a(),o()}},[e]);let S=async t=>{e&&_?await c(w,"courses",t.id,t):console.warn("❌ 無編輯權限")},j=async(t,a)=>{e&&_?await m(w,"courses",t,a):console.warn("❌ 無編輯權限")},x=async t=>{e&&_?await u(w,"courses",t):console.warn("❌ 無編輯權限")},P=async t=>{e&&_?await c(w,"workShifts",t.id,t):console.warn("❌ 無編輯權限")},E=async(t,a)=>{e&&_?await m(w,"workShifts",t,a):console.warn("❌ 無編輯權限")},k=async t=>{e&&_?await u(w,"workShifts",t):console.warn("❌ 無編輯權限")},D=async t=>{e&&_?await c(w,"events",t.id,t):console.warn("❌ 無編輯權限")},L=async(t,a)=>{e&&_?await m(w,"events",t,a):console.warn("❌ 無編輯權限")},R=async t=>{e&&_?await u(w,"events",t):console.warn("❌ 無編輯權限")};return{courses:r,shifts:s,events:y,loading:g,canEdit:_,addCourse:S,updateCourse:j,deleteCourse:x,addWorkShift:P,updateWorkShift:E,deleteWorkShift:k,addEvent:D,updateEvent:L,deleteEvent:R}}e.s(["useScheduleData",()=>y],93475);var T=e.i(43476),g=e.i(8437);function b(){let{signInWithGoogle:e}=(0,a.useAuth)(),t=async()=>{try{await e()}catch(e){console.error("登入失敗:",e),alert("登入失敗，請稍後再試")}};return(0,T.jsx)("div",{className:g.default.container,children:(0,T.jsxs)("div",{className:g.default.card,children:[(0,T.jsx)("div",{className:g.default.iconWrapper,children:(0,T.jsx)("svg",{className:g.default.icon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,T.jsx)("h2",{className:g.default.title,children:"需要登入"}),(0,T.jsx)("p",{className:g.default.description,children:"請先使用 Google 帳號登入，才能查看課表資料"}),(0,T.jsxs)("button",{onClick:t,className:g.default.loginButton,children:[(0,T.jsxs)("svg",{className:g.default.googleIcon,viewBox:"0 0 24 24",children:[(0,T.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,T.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,T.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,T.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"使用 Google 登入"]}),(0,T.jsx)("p",{className:g.default.footer,children:"僅限授權的家庭成員登入"})]})})}e.s(["default",()=>b],34759)},10160,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},48503,e=>{e.v(e=>Promise.resolve().then(()=>e(15833)))},70653,e=>{e.v(t=>Promise.all(["static/chunks/90fdd386fff6c4e1.js"].map(t=>e.l(t))).then(()=>t(24154)))},95111,e=>{e.v(t=>Promise.all(["static/chunks/cca5a266ceb00b0d.js"].map(t=>e.l(t))).then(()=>t(38201)))}]);