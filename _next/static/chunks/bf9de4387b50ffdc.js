(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8437,e=>{e.v({card:"LoginPrompt-module__ERCXna__card",container:"LoginPrompt-module__ERCXna__container",description:"LoginPrompt-module__ERCXna__description",footer:"LoginPrompt-module__ERCXna__footer",googleIcon:"LoginPrompt-module__ERCXna__googleIcon",icon:"LoginPrompt-module__ERCXna__icon",iconWrapper:"LoginPrompt-module__ERCXna__iconWrapper",loginButton:"LoginPrompt-module__ERCXna__loginButton",title:"LoginPrompt-module__ERCXna__title"})},93475,19119,24558,34759,e=>{"use strict";var t=e.i(71645),i=e.i(32341);let a=[{id:"mon-1",name:"職涯分析與規劃",day:1,startTime:"08:10",endTime:"10:00",location:"博愛CB105D",color:"#fca5a5"},{id:"mon-2",name:"國文(II)：語文表達",day:1,startTime:"10:10",endTime:"12:00",location:"博愛C306",color:"#fda4af"},{id:"mon-3",name:"數位電子學",day:1,startTime:"13:10",endTime:"16:00",location:"博愛G313",color:"var(--color-primary)"},{id:"tue-1",name:"網際網路概論",day:2,startTime:"08:10",endTime:"10:00",location:"博愛G512電腦教室",color:"#fdba74"},{id:"tue-2",name:"大學生活學習與輔導",day:2,startTime:"13:10",endTime:"15:00",location:"博愛G313",color:"var(--color-highlight)"},{id:"wed-1",name:"英文(II)",day:3,startTime:"08:10",endTime:"10:00",location:"博愛C608",color:"#86efac"},{id:"wed-2",name:"羽球",day:3,startTime:"10:10",endTime:"12:00",location:"博愛公誠樓籃球場",color:"#bef264"},{id:"wed-3",name:"資料結構",day:3,startTime:"15:10",endTime:"18:00",location:"博愛G513電腦教室",color:"var(--color-secondary)"},{id:"fri-1",name:"民歌與吉他",day:5,startTime:"08:10",endTime:"10:00",location:"博愛M304",color:"#93c5fd"},{id:"fri-2",name:"Python資料視覺化",day:5,startTime:"10:10",endTime:"12:00",location:"博愛G521電腦教室",color:"#c4b5fd"},{id:"fri-3",name:"C程式設計",day:5,startTime:"13:10",endTime:"16:00",location:"博愛G512電腦教室",color:"#a78bfa"}],n=[{id:"aut-1",date:"2026-01-11",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"aut-2",date:"2026-01-17",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"aut-3",date:"2026-01-18",startTime:"09:00",endTime:"18:00",note:"秋季班"},{id:"win-1",date:"2026-01-27",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-2",date:"2026-01-29",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-3",date:"2026-02-02",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-4",date:"2026-02-04",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-5",date:"2026-02-05",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-6",date:"2026-02-06",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-7",date:"2026-02-09",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-8",date:"2026-02-10",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-9",date:"2026-02-11",startTime:"09:00",endTime:"18:00",note:"冬令營助教"},{id:"win-10",date:"2026-02-13",startTime:"09:00",endTime:"18:00",note:"冬令營助教"}],r=[{id:"sel-1",title:"志願序結果查詢 & 本班選課",date:"2026-01-05",description:"09:00 查詢結果 / 19:00 開始選課",type:"deadline"},{id:"sel-2",title:"本系選課 (含輔雙)",date:"2026-01-06",description:"19:00 開始",type:"deadline"},{id:"sel-3",title:"跨系/跨班選課",date:"2026-01-08",description:"19:00 開始",type:"deadline"},{id:"sel-4",title:"全校網路加退選",date:"2026-02-23",description:"上午 10:00 開始",type:"deadline"},{id:"sel-5",title:"人工加退選",date:"2026-03-02",description:"上午 09:00 開始",type:"personal"}];e.i(36180);var o=e.i(98925),d=e.i(59141);function s(e,t){if(!d.isFirebaseConfigured||!d.db)throw Error("Firebase 未設定，請檢查環境變數");return(0,o.collection)(d.db,"shared","data",t)}async function l(e,t,i,a){if(!d.isFirebaseConfigured||!d.db)throw Error("Firebase 未設定，請檢查環境變數");let n=(0,o.doc)(d.db,"shared","data",t,i);await (0,o.setDoc)(n,{...a,updatedAt:new Date().toISOString()})}async function c(e,t,...i){let a=s(e,t),n=i.length>0?(0,o.query)(a,...i):a;return(await (0,o.getDocs)(n)).docs.map(e=>({id:e.id,...e.data()}))}async function m(e,t,i,a){if(!d.isFirebaseConfigured||!d.db)throw Error("Firebase 未設定，請檢查環境變數");let n=(0,o.doc)(d.db,"shared","data",t,i);await (0,o.updateDoc)(n,{...a,updatedAt:new Date().toISOString()})}async function u(e,t,i){if(!d.isFirebaseConfigured||!d.db)throw Error("Firebase 未設定，請檢查環境變數");let a=(0,o.doc)(d.db,"shared","data",t,i);await (0,o.deleteDoc)(a)}function f(e,t,i,...a){let n=s(e,t),r=a.length>0?(0,o.query)(n,...a):n;return(0,o.onSnapshot)(r,e=>{i(e.docs.map(e=>({id:e.id,...e.data()})))})}async function g(e,t,i){let a=i.map(i=>{let{id:a,...n}=i;return l(e,t,a,n)});await Promise.all(a)}function h(e){return!!e}e.s(["batchSetDocuments",()=>g,"deleteDocument",()=>u,"getDocuments",()=>c,"setDocument",()=>l,"subscribeToCollection",()=>f,"updateDocument",()=>m],19119),e.s(["hasWriteAccess",()=>h],24558);let p="shared";function x(){let{user:e}=(0,i.useAuth)(),[o,d]=(0,t.useState)([]),[s,h]=(0,t.useState)([]),[x,y]=(0,t.useState)([]),[w,b]=(0,t.useState)(!0),[T,v]=(0,t.useState)(!1),j=async()=>{try{let e=await c(p,"courses"),t=await c(p,"workShifts"),i=await c(p,"events");0===e.length&&await g(p,"courses",a),0===t.length&&await g(p,"workShifts",n),0===i.length&&await g(p,"events",r)}catch(e){console.error("❌ 初始化預設資料失敗:",e)}};(0,t.useEffect)(()=>{if(!e){d([]),h([]),y([]),b(!1),v(!1);return}b(!0),v(!!e.email),j().then(()=>{b(!1)});let t=f(p,"courses",e=>d(e)),i=f(p,"workShifts",e=>h(e)),a=f(p,"events",e=>y(e));return()=>{t(),i(),a()}},[e]);let _=async t=>{e&&T?await l(p,"courses",t.id,t):console.warn("❌ 無編輯權限")},C=async(t,i)=>{e&&T?await m(p,"courses",t,i):console.warn("❌ 無編輯權限")},S=async t=>{e&&T?await u(p,"courses",t):console.warn("❌ 無編輯權限")},k=async t=>{e&&T?await l(p,"workShifts",t.id,t):console.warn("❌ 無編輯權限")},D=async(t,i)=>{e&&T?await m(p,"workShifts",t,i):console.warn("❌ 無編輯權限")},I=async t=>{e&&T?await u(p,"workShifts",t):console.warn("❌ 無編輯權限")},A=async t=>{e&&T?await l(p,"events",t.id,t):console.warn("❌ 無編輯權限")},z=async(t,i)=>{e&&T?await m(p,"events",t,i):console.warn("❌ 無編輯權限")},E=async t=>{e&&T?await u(p,"events",t):console.warn("❌ 無編輯權限")};return{courses:o,shifts:s,events:x,loading:w,canEdit:T,addCourse:_,updateCourse:C,deleteCourse:S,addWorkShift:k,updateWorkShift:D,deleteWorkShift:I,addEvent:A,updateEvent:z,deleteEvent:E}}e.s(["useScheduleData",()=>x],93475);var y=e.i(43476),w=e.i(8437);function b(){let{signInWithGoogle:e}=(0,i.useAuth)(),t=async()=>{try{await e()}catch(e){console.error("登入失敗:",e),alert("登入失敗，請稍後再試")}};return(0,y.jsx)("div",{className:w.default.container,children:(0,y.jsxs)("div",{className:w.default.card,children:[(0,y.jsx)("div",{className:w.default.iconWrapper,children:(0,y.jsx)("svg",{className:w.default.icon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,y.jsx)("h2",{className:w.default.title,children:"需要登入"}),(0,y.jsx)("p",{className:w.default.description,children:"請先使用 Google 帳號登入，才能查看課表資料"}),(0,y.jsxs)("button",{onClick:t,className:w.default.loginButton,children:[(0,y.jsxs)("svg",{className:w.default.googleIcon,viewBox:"0 0 24 24",children:[(0,y.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,y.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,y.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,y.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"使用 Google 登入"]}),(0,y.jsx)("p",{className:w.default.footer,children:"僅限授權的家庭成員登入"})]})})}e.s(["default",()=>b],34759)},38995,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(93475),n=e.i(32341),r=e.i(34759);function o(){let{user:e,loading:o}=(0,n.useAuth)(),{courses:d}=(0,a.useScheduleData)();if(o)return(0,t.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"載入中..."});if(!e)return(0,t.jsx)(r.default,{});let s=[{id:1,label:"第 1 節",time:"0810-0900",start:"08:10",end:"09:00"},{id:2,label:"第 2 節",time:"0910-1000",start:"09:10",end:"10:00"},{id:3,label:"第 3 節",time:"1010-1100",start:"10:10",end:"11:00"},{id:4,label:"第 4 節",time:"1110-1200",start:"11:10",end:"12:00"},{id:5,label:"第 5 節",time:"1210-1300",start:"12:10",end:"13:00"},{id:6,label:"第 6 節",time:"1310-1400",start:"13:10",end:"14:00"},{id:7,label:"第 7 節",time:"1410-1500",start:"14:10",end:"15:00"},{id:8,label:"第 8 節",time:"1510-1600",start:"15:10",end:"16:00"},{id:9,label:"第 9 節",time:"1610-1700",start:"16:10",end:"17:00"},{id:10,label:"第 10 節",time:"1710-1800",start:"17:10",end:"18:00"}];return(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:(0,t.jsx)("div",{className:"glass",style:{padding:"1.5rem",minHeight:"600px"},children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem",textAlign:"center"},children:"大一下學期課表"}),(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("div",{style:{minWidth:"600px",display:"grid",gridTemplateColumns:"minmax(100px, auto) repeat(5, 1fr)",gap:"1px",backgroundColor:"var(--glass-border)"},children:[(0,t.jsx)("div",{style:{padding:"0.25rem",background:"rgba(255,255,255,0.5)",textAlign:"center"}}),["一","二","三","四","五"].map(e=>(0,t.jsxs)("div",{style:{padding:"0.25rem",background:"rgba(255,255,255,0.5)",textAlign:"center",fontWeight:"bold",fontSize:"0.9rem"},children:["週",e]},e)),s.map(e=>(0,t.jsxs)(i.Fragment,{children:[(0,t.jsxs)("div",{style:{padding:"0.1rem",textAlign:"center",fontSize:"0.8rem",background:"rgba(255,255,255,0.3)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"48px",borderRight:"1px solid rgba(0,0,0,0.05)"},children:[(0,t.jsx)("div",{style:{marginBottom:"0px",whiteSpace:"nowrap",fontWeight:"bold"},children:e.label}),(0,t.jsx)("div",{style:{fontSize:"0.65rem",opacity:.8,lineHeight:"1"},children:e.time.replace("-","\n")})]}),Array.from({length:5}).map((i,a)=>{let n,r=a+1,o=(n=e.start,d.find(e=>e.day===r&&e.startTime===n));if(d.some(t=>{if(t.day!==r)return!1;let i=s.findIndex(e=>e.start===t.startTime),a=s.findIndex(e=>e.end===t.endTime);-1===a&&"18:00"===t.endTime&&(a=9);let n=s.findIndex(t=>t.id===e.id);return n>i&&n<=a}))return null;if(o){var l,c;let i,a,n=(l=o.startTime,c=o.endTime,i=s.findIndex(e=>e.start===l),a=s.findIndex(e=>e.end===c),-1!==i&&-1!==a?a-i+1:1);return(0,t.jsxs)("div",{style:{gridRow:`span ${n}`,backgroundColor:o.color,color:"#1f2937",padding:"0.25rem",margin:"2px",borderRadius:"6px",fontSize:"0.9rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",zIndex:1,position:"relative"},children:[(0,t.jsx)("div",{style:{fontWeight:"bold",marginBottom:"2px",textAlign:"center",lineHeight:"1.2",fontSize:"1rem",textShadow:"0 1px 2px rgba(255,255,255,0.5)"},children:o.name}),(0,t.jsx)("div",{style:{fontSize:"0.85rem",fontWeight:"bold",opacity:.9,textShadow:"0 1px 1px rgba(255,255,255,0.4)"},children:o.location})]},`${r}-${e.id}`)}return(0,t.jsx)("div",{style:{background:"rgba(255,255,255,0.1)",borderBottom:"1px solid rgba(255,255,255,0.2)"}},`${r}-${e.id}`)})]},e.id))]})})]})})})}e.s(["default",()=>o])}]);