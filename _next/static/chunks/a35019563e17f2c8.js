(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19119,e=>{"use strict";e.i(36180);var t=e.i(98925),a=e.i(59141);function r(e){let t={};for(let[a,r]of Object.entries(e))void 0!==r&&(t[a]=r);return t}function s(e,r){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");return(0,t.collection)(a.db,"shared","data",r)}async function i(e,a,i){let d=s(e,a),o=r({...i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return(await (0,t.addDoc)(d,o)).id}async function d(e,s,i,d){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let o=(0,t.doc)(a.db,"shared","data",s,i),l=r({...d,updatedAt:new Date().toISOString()});await (0,t.setDoc)(o,l)}async function o(e,a,...r){let i=s(e,a),d=r.length>0?(0,t.query)(i,...r):i;return(await (0,t.getDocs)(d)).docs.map(e=>({id:e.id,...e.data()}))}async function l(e,s,i,d){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let o=(0,t.doc)(a.db,"shared","data",s,i),l=r({...d,updatedAt:new Date().toISOString()});await (0,t.updateDoc)(o,l)}async function n(e,r,s){if(!a.isFirebaseConfigured||!a.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let i=(0,t.doc)(a.db,"shared","data",r,s);await (0,t.deleteDoc)(i)}function u(e,a,r,...i){let d=s(e,a),o=i.length>0?(0,t.query)(d,...i):d;return(0,t.onSnapshot)(o,e=>{r(e.docs.map(e=>({id:e.id,...e.data()})))})}async function c(e,t,a){let r=a.map(a=>{let{id:r,...s}=a;return d(e,t,r,s)});await Promise.all(r)}function m(e){return u("shared","gameGuides",e,(0,t.orderBy)("order","asc"))}async function g(e){return i("shared","gameGuides",e)}async function p(e,t){return l("shared","gameGuides",e,t)}async function _(e){return n("shared","gameGuides",e)}async function h(e){let t=e.map(e=>g(e));await Promise.all(t)}function b(e){return u("shared","courseNotes",e,(0,t.orderBy)("createdAt","desc"))}function f(e,a){return u("shared","courseNotes",a,(0,t.where)("courseId","==",e),(0,t.orderBy)("createdAt","desc"))}async function x(e){return i("shared","courseNotes",e)}async function G(e,t){return l("shared","courseNotes",e,t)}async function v(e){return n("shared","courseNotes",e)}async function C(e,t){return G(e,{completed:t})}async function N(){return(await o("shared","courseNotes",(0,t.where)("completed","==",!1),(0,t.where)("type","in",["homework","exam"]))).filter(e=>e.dueDate).sort((e,t)=>e.dueDate&&t.dueDate?new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime():0)}e.s(["addCourseNote",()=>x,"addGameGuide",()=>g,"batchImportGameGuides",()=>h,"batchSetDocuments",()=>c,"deleteCourseNote",()=>v,"deleteDocument",()=>n,"deleteGameGuide",()=>_,"getDocuments",()=>o,"getIncompleteTasks",()=>N,"setDocument",()=>d,"subscribeToCollection",()=>u,"subscribeToCourseNotes",()=>b,"subscribeToCourseNotesByCourse",()=>f,"subscribeToGameGuides",()=>m,"toggleCourseNoteCompletion",()=>C,"updateCourseNote",()=>G,"updateDocument",()=>l,"updateGameGuide",()=>p])},85204,e=>{"use strict";let t=[{id:"reverse-1999",name:"é‡è¿”æœªä¾†ï¼š1999",icon:"ğŸŒ§ï¸",versions:[{version:"3.1",characters:[{name:"é‡æ¨¹è“",resonanceCode:"AjwAPBD8BToEJiAkITFSMVRMZkxGMzQ5QTRQSDRIQA=="},{name:"å‘Šæ­»é³¥",resonanceCode:"ASoAKAE8IEFQQVL0Q0hlKUVDMiQELRQmJEUwOUA="}],links:[{id:"v31-1",title:"ã€è§’è‰²ã€‘é‡æ¨¹è“ - è–ªè¡€éšŠæœ€å¾Œä¸€å¡Šæ‹¼åœ–",url:"https://www.taptap.cn/moment/718173987636514461",description:"å…­æ˜Ÿ æœ¨å±¬æ€§ è¼”åŠ©"},{id:"v31-2",title:"ã€è§’è‰²ã€‘å‘Šæ­»é³¥ - é›»èƒ½éšŠæ ¸æ–°Cï¼Œé•·è»¸ä¹‹ç¥",url:"https://www.taptap.cn/moment/725428213244758184",description:"å…­æ˜Ÿ æ™ºå±¬æ€§ è¼¸å‡º"},{id:"v31-3",title:"ã€æ´»å‹•ã€‘å†·éµ - å…¨é€šé—œæ”»ç•¥",url:"https://www.taptap.cn/moment/725281520306094345",description:"ç‰ˆæœ¬æ´»å‹• é™æ™‚é ˜å–"}]},{version:"3.2",characters:[{name:"è²éº—çˆ¾",resonanceCode:"AjhFNAI0ADwgPDA6BCkFK0QrQPQkRENBUkBB"},{name:"ç°èª¿è—",resonanceCode:"ATwAPBAmUDhC8CQ0FTREKFQqBCQhQSBDQEQy"}],links:[{id:"v32-1",title:"ã€è§’è‰²ã€‘è²éº—çˆ¾ - é€±å¹´å¤§Cï¼Œé¤˜æš‰éšŠæ ¸å¿ƒ",url:"https://www.taptap.cn/moment/733044921438569435",description:"å…­æ˜Ÿ ç¸å±¬æ€§ è¼¸å‡º"},{id:"v32-2",title:"ã€è§’è‰²ã€‘ç°èª¿è— - æ–°æ™‚ä»£é›»èƒ½éšŠæ–°è¼”C",url:"https://www.taptap.cn/moment/740636166335759363",description:"äº”æ˜Ÿ æ˜Ÿå±¬æ€§ è¼”åŠ©"},{id:"v32-3",title:"ã€ä¸ŠåŠæ´»å‹•ã€‘å‘½é‹çš„é›¨å­£ - å…¨é€šé—œæ”»ç•¥",url:"https://www.taptap.cn/moment/732909496178839006",description:"3.2 ä¸ŠåŠç‰ˆæœ¬æ´»å‹•"},{id:"v32-4",title:"ã€ä¸‹åŠæ´»å‹•ã€‘ç„¡ç‡’ - å…¨é€šé—œæ”»ç•¥",url:"https://www.taptap.cn/moment/740466917403265017",description:"3.2 ä¸‹åŠç‰ˆæœ¬æ´»å‹•"}]},{version:"3.3",characters:[{name:"ç‘ªçˆ¾ç´—",resonanceCode:"BTwAPBA0IDQiKgQpFfA0QyQ7VDpDQVFEUENBTEA="},{name:"ä¼Šæˆˆçˆ¾",resonanceCode:"AfQkNAE9ACYhNEA8YCpCOVMoEjgFKgMnRQ=="}],links:[{id:"v33-1",title:"ã€è§’è‰²ã€‘ç‘ªçˆ¾ç´— - é¤˜æš‰éšŠçš„èŠ±ç’°ï¼Œè·¨æ™‚ä»£çš„ç›¾å¥¶",url:"https://www.taptap.cn/moment/748259688637795101",description:"å…­æ˜Ÿ å²©å±¬æ€§ é˜²ç¦¦"},{id:"v33-2",title:"ã€è§’è‰²ã€‘ä¼Šæˆˆçˆ¾ - æ–°æ‰‹é¤ŠæˆæŒ‡å—",url:"https://www.taptap.cn/moment/755855972479533766",description:"äº”æ˜Ÿ æœ¨å±¬æ€§ è¼¸å‡º"},{id:"v33-3",title:"ã€ä¸ŠåŠæ´»å‹•ã€‘ä»¥é¨å£«ä¹‹å - å…¨é€šé—œæ”»ç•¥",url:"https://www.taptap.cn/moment/748127427296759347",description:"3.3 ä¸ŠåŠç‰ˆæœ¬æ´»å‹•"},{id:"v33-4",title:"ã€ä¸‹åŠæ´»å‹•ã€‘é¢¨æš´å‰å¤• - å…¨é€šé—œæ”»ç•¥",url:"https://www.taptap.cn/moment/755693322269363732",description:"3.3 ä¸‹åŠç‰ˆæœ¬æ´»å‹•"}]}],links:[{id:"1",title:"Taptap å°ä¸¸çŠŠå‡  - æ”»ç•¥å¤§ä½¬",url:"https://www.taptap.cn/user/8268254"},{id:"2",title:"å®˜æ–¹ç¶²ç«™",url:"https://re1999.bluepoch.com"}]},{id:"hsr",name:"å´©å£ï¼šæ˜Ÿç©¹éµé“",icon:"ğŸš‚",links:[{id:"1",title:"ç‰è¡¡æ¯",url:"https://homdgcat.wiki/sr/char?lang=CH",description:"æ‡‚å¾—éƒ½æ‡‚"},{id:"2",title:"æ˜Ÿç©¹éµé“å·¥åŠ",url:"https://www.prydwen.gg/star-rail/",description:"è§’è‰²å¼·åº¦æ’è¡Œèˆ‡çµ„éšŠå»ºè­° (è‹±æ–‡)"}]}];e.s(["games",0,t])},47518,e=>{e.v({btnComplete:"GuideComponents-module__diNexG__btnComplete",btnDelete:"GuideComponents-module__diNexG__btnDelete",btnEdit:"GuideComponents-module__diNexG__btnEdit",btnPrimary:"GuideComponents-module__diNexG__btnPrimary",btnSecondary:"GuideComponents-module__diNexG__btnSecondary",cardContent:"GuideComponents-module__diNexG__cardContent",cardFooter:"GuideComponents-module__diNexG__cardFooter",cardHeader:"GuideComponents-module__diNexG__cardHeader",cardSubtitle:"GuideComponents-module__diNexG__cardSubtitle",cardTitle:"GuideComponents-module__diNexG__cardTitle",categoryBadge:"GuideComponents-module__diNexG__categoryBadge",completed:"GuideComponents-module__diNexG__completed",completedBadge:"GuideComponents-module__diNexG__completedBadge",completedOverlay:"GuideComponents-module__diNexG__completedOverlay",guideCard:"GuideComponents-module__diNexG__guideCard",progressBar:"GuideComponents-module__diNexG__progressBar",progressFill:"GuideComponents-module__diNexG__progressFill",progressText:"GuideComponents-module__diNexG__progressText",starEmpty:"GuideComponents-module__diNexG__starEmpty",starFilled:"GuideComponents-module__diNexG__starFilled",starRating:"GuideComponents-module__diNexG__starRating",tag:"GuideComponents-module__diNexG__tag",tagList:"GuideComponents-module__diNexG__tagList"})},44104,e=>{e.v({active:"GuideEditForm-module__ZhiEOq__active",btnCancel:"GuideEditForm-module__ZhiEOq__btnCancel",btnSave:"GuideEditForm-module__ZhiEOq__btnSave",editForm:"GuideEditForm-module__ZhiEOq__editForm",errorBox:"GuideEditForm-module__ZhiEOq__errorBox",formActions:"GuideEditForm-module__ZhiEOq__formActions",formGroup:"GuideEditForm-module__ZhiEOq__formGroup",formHeader:"GuideEditForm-module__ZhiEOq__formHeader",hint:"GuideEditForm-module__ZhiEOq__hint",selectedTag:"GuideEditForm-module__ZhiEOq__selectedTag",selectedTags:"GuideEditForm-module__ZhiEOq__selectedTags",tagButton:"GuideEditForm-module__ZhiEOq__tagButton",tagButtonAdd:"GuideEditForm-module__ZhiEOq__tagButtonAdd",tagSelector:"GuideEditForm-module__ZhiEOq__tagSelector"})},13660,e=>{e.v({active:"page-module__YHTL8G__active",btnAddGuide:"page-module__YHTL8G__btnAddGuide",btnEditToggle:"page-module__YHTL8G__btnEditToggle",categoryCount:"page-module__YHTL8G__categoryCount",categoryGroup:"page-module__YHTL8G__categoryGroup",categoryHeader:"page-module__YHTL8G__categoryHeader",container:"page-module__YHTL8G__container",debugInfo:"page-module__YHTL8G__debugInfo",emptyState:"page-module__YHTL8G__emptyState",gameIcon:"page-module__YHTL8G__gameIcon",gameSelector:"page-module__YHTL8G__gameSelector",gameTab:"page-module__YHTL8G__gameTab",groupedGuidesContainer:"page-module__YHTL8G__groupedGuidesContainer",guidesGrid:"page-module__YHTL8G__guidesGrid",icon:"page-module__YHTL8G__icon",loading:"page-module__YHTL8G__loading",loginPrompt:"page-module__YHTL8G__loginPrompt",pageTitle:"page-module__YHTL8G__pageTitle",progressInfo:"page-module__YHTL8G__progressInfo",progressOverview:"page-module__YHTL8G__progressOverview",spin:"page-module__YHTL8G__spin",spinner:"page-module__YHTL8G__spinner",toolbar:"page-module__YHTL8G__toolbar",versionChip:"page-module__YHTL8G__versionChip",versionSelector:"page-module__YHTL8G__versionSelector"})},86393,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(19119),s=e.i(32341);let i=["è§’è‰²é¤Šæˆ","è§’è‰²æ”»ç•¥","æ´»å‹•æ”»ç•¥","ç‰ˆæœ¬ç¸½è¦½","é€šç”¨è³‡æº"],d=["æ–°æ‰‹å¿…çœ‹","é€Ÿåˆ·æŒ‡å—","é…éšŠæ¨è–¦","æ©Ÿåˆ¶è§£æ","è³‡æºè¦åŠƒ","é™æ™‚æ´»å‹•","é«˜é›£åº¦","é¤Šæˆè·¯ç·š"],o={æ–°æ‰‹å¿…çœ‹:{bg:"rgba(34, 197, 94, 0.15)",text:"#22C55E",border:"rgba(34, 197, 94, 0.3)"},é€Ÿåˆ·æŒ‡å—:{bg:"rgba(245, 158, 11, 0.15)",text:"#F59E0B",border:"rgba(245, 158, 11, 0.3)"},é…éšŠæ¨è–¦:{bg:"rgba(59, 130, 246, 0.15)",text:"#3B82F6",border:"rgba(59, 130, 246, 0.3)"},æ©Ÿåˆ¶è§£æ:{bg:"rgba(139, 92, 246, 0.15)",text:"#8B5CF6",border:"rgba(139, 92, 246, 0.3)"},è³‡æºè¦åŠƒ:{bg:"rgba(236, 72, 153, 0.15)",text:"#EC4899",border:"rgba(236, 72, 153, 0.3)"},é™æ™‚æ´»å‹•:{bg:"rgba(239, 68, 68, 0.15)",text:"#EF4444",border:"rgba(239, 68, 68, 0.3)"},é«˜é›£åº¦:{bg:"rgba(251, 146, 60, 0.15)",text:"#FB923C",border:"rgba(251, 146, 60, 0.3)"},é¤Šæˆè·¯ç·š:{bg:"rgba(6, 182, 212, 0.15)",text:"#06B6D4",border:"rgba(6, 182, 212, 0.3)"}},l={è§’è‰²æ”»ç•¥:{bg:"rgba(8, 145, 178, 0.15)",text:"var(--color-primary)"},æ´»å‹•æ”»ç•¥:{bg:"rgba(245, 158, 11, 0.15)",text:"var(--color-highlight)"},é€šç”¨è³‡æº:{bg:"rgba(5, 150, 105, 0.15)",text:"var(--color-accent)"},è§’è‰²é¤Šæˆ:{bg:"rgba(139, 92, 246, 0.15)",text:"#8B5CF6"},ç‰ˆæœ¬ç¸½è¦½:{bg:"rgba(236, 72, 153, 0.15)",text:"#EC4899"}},n=(e,t)=>{let a=new Date().toISOString(),r={gameId:e,title:"",url:"",category:"è§’è‰²æ”»ç•¥",priority:3,tags:[],completed:!1,order:Date.now(),createdAt:a,updatedAt:a};return t&&(r.version=t),r};var u=e.i(47518);let c=({category:e})=>{let a=l[e];return(0,t.jsx)("span",{className:u.default.categoryBadge,style:{background:a.bg,color:a.text},children:e})},m=({rating:e,interactive:a=!1,onChange:r})=>(0,t.jsx)("div",{className:u.default.starRating,children:[1,2,3,4,5].map(s=>(0,t.jsx)("span",{className:s<=e?u.default.starFilled:u.default.starEmpty,onClick:()=>{a&&r&&r(s)},style:{cursor:a?"pointer":"default"},title:a?`è¨­å®šç‚º ${s} æ˜Ÿ`:`${e} æ˜Ÿè©•ç´š`,children:"â˜…"},s))}),g=({tags:e})=>0===e.length?null:(0,t.jsx)("div",{className:u.default.tagList,children:e.map((e,a)=>{let r=o[e]||{bg:"rgba(148, 163, 184, 0.15)",text:"#94A3B8",border:"rgba(148, 163, 184, 0.3)"};return(0,t.jsx)("span",{className:u.default.tag,style:{background:r.bg,color:r.text,borderColor:r.border},children:e},a)})}),p=(0,a.memo)(({guide:e,editMode:a=!1,onEdit:r,onDelete:s})=>(0,t.jsxs)("div",{className:u.default.guideCard,children:[(0,t.jsxs)("div",{className:u.default.cardHeader,children:[(0,t.jsx)(c,{category:e.category}),(0,t.jsx)(m,{rating:e.priority})]}),(0,t.jsxs)("div",{className:u.default.cardContent,children:[(0,t.jsx)("h3",{className:u.default.cardTitle,children:e.title}),e.subtitle&&(0,t.jsx)("p",{className:u.default.cardSubtitle,children:e.subtitle}),e.tags.length>0&&(0,t.jsx)(g,{tags:e.tags})]}),(0,t.jsxs)("div",{className:u.default.cardFooter,children:[!a&&(0,t.jsxs)(t.Fragment,{children:[e.url&&(0,t.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:u.default.btnPrimary,children:"æŸ¥çœ‹æ”»ç•¥ â†’"}),e.resonanceCode&&(0,t.jsx)("button",{className:u.default.btnSecondary,onClick:()=>{e.resonanceCode&&(navigator.clipboard.writeText(e.resonanceCode),alert(`å·²è¤‡è£½å…±é³´è­œä»£ç¢¼ï¼š
${e.resonanceCode}`))},children:"ğŸ“‹ è¤‡è£½å…±é³´è­œ"})]}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:u.default.btnEdit,onClick:r,children:"âœ ç·¨è¼¯"}),(0,t.jsx)("button",{className:u.default.btnDelete,onClick:s,children:"ğŸ—‘ï¸ åˆªé™¤"})]})]})]}));p.displayName="GuideCard";var _=e.i(85204),h=e.i(44104);let b=(0,a.memo)(({guide:e,gameId:r,version:s,onSave:o,onCancel:l})=>{let[u,c]=(0,a.useState)(e||n(r,s)),[g,p]=(0,a.useState)([]),[b,f]=(0,a.useState)(!1),x=_.games.find(e=>e.id===u.gameId),G=x?.versions?.map(e=>e.version)||[];(0,a.useEffect)(()=>{e||c(e=>({...e,gameId:r,version:s}))},[r,s,e]),(0,a.useEffect)(()=>{e?c(e):c(n(r,s))},[e,r,s]);let v=async e=>{let t;e.preventDefault();let a=(t=[],u.title?.trim()||t.push("æ”»ç•¥ä¸»é¡Œä¸å¯ç‚ºç©º"),u.url?.trim()||u.resonanceCode?.trim()||t.push("è‡³å°‘éœ€è¦å¡«å¯«æ”»ç•¥é€£çµæˆ–å…±é³´è­œä»£ç¢¼"),u.url&&!(e=>{try{return new URL(e),!0}catch{return!1}})(u.url)&&t.push("æ”»ç•¥é€£çµæ ¼å¼ä¸æ­£ç¢º"),u.priority&&(u.priority<1||u.priority>5)&&t.push("é‡è¦æ€§å¿…é ˆåœ¨ 1-5 ä¹‹é–“"),t);if(a.length>0)return void p(a);let r={...u};r.subtitle?.trim()||delete r.subtitle,r.resonanceCode?.trim()||delete r.resonanceCode,r.version?.trim()||delete r.version,f(!0);try{await o(r),p([])}catch(e){p([e instanceof Error?e.message:"å„²å­˜å¤±æ•—"])}finally{f(!1)}};return(0,t.jsxs)("form",{className:h.default.editForm,onSubmit:v,children:[(0,t.jsx)("div",{className:h.default.formHeader,children:(0,t.jsx)("h3",{children:e?"ç·¨è¼¯æ”»ç•¥":"æ–°å¢æ”»ç•¥"})}),g.length>0&&(0,t.jsx)("div",{className:h.default.errorBox,children:g.map((e,a)=>(0,t.jsxs)("div",{children:["â€¢ ",e]},a))}),(0,t.jsxs)("div",{className:h.default.formGroup,children:[(0,t.jsx)("label",{children:"æ”»ç•¥ä¸»é¡Œ *"}),(0,t.jsx)("input",{type:"text",value:u.title,onChange:e=>c({...u,title:e.target.value}),placeholder:"ä¾‹å¦‚ï¼šè‰¾è‰çµ²è§’è‰²æ”»ç•¥",required:!0})]}),(0,t.jsxs)("div",{className:h.default.formGroup,children:[(0,t.jsx)("label",{children:"å‰¯æ¨™é¡Œ"}),(0,t.jsx)("input",{type:"text",value:u.subtitle||"",onChange:e=>c({...u,subtitle:e.target.value}),placeholder:"é¸å¡«ï¼Œä¾‹å¦‚ï¼šè¼¸å‡ºæµé…éšŠè©³è§£"})]}),(0,t.jsxs)("div",{className:h.default.formGroup,children:[(0,t.jsx)("label",{children:"æ”»ç•¥é€£çµ"}),(0,t.jsx)("input",{type:"url",value:u.url,onChange:e=>c({...u,url:e.target.value}),placeholder:"https://example.com/guide"})]}),(0,t.jsxs)("div",{className:h.default.formGroup,children:[(0,t.jsx)("label",{children:"å…±é³´è­œåˆ†äº«ç¢¼"}),(0,t.jsx)("textarea",{value:u.resonanceCode||"",onChange:e=>c({...u,resonanceCode:e.target.value}),placeholder:"è²¼ä¸Š Base64 ç·¨ç¢¼çš„å…±é³´è­œä»£ç¢¼ï¼ˆé¸å¡«ï¼‰",rows:3}),(0,t.jsx)("small",{className:h.default.hint,children:"ç”¨æ–¼éŠæˆ²å…§ä¸€éµåŒ¯å…¥é…ç½®"})]}),(0,t.jsxs)("div",{className:h.default.formGroup,children:[(0,t.jsx)("label",{children:"æ”»ç•¥åˆ†é¡ *"}),(0,t.jsx)("select",{value:u.category,onChange:e=>c({...u,category:e.target.value}),required:!0,children:i.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:h.default.formGroup,children:[(0,t.jsx)("label",{children:"é©ç”¨ç‰ˆæœ¬"}),(0,t.jsx)("input",{type:"text",value:u.version||"",onChange:e=>c({...u,version:e.target.value||void 0}),placeholder:"ä¾‹å¦‚ï¼š3.1ã€3.2ï¼ˆé¸å¡«ï¼‰",list:"version-suggestions"}),G.length>0&&(0,t.jsx)("datalist",{id:"version-suggestions",children:G.map(e=>(0,t.jsx)("option",{value:e},e))}),(0,t.jsx)("small",{className:h.default.hint,children:'é¸å¡«ï¼Œå¯è¼¸å…¥ç‰ˆæœ¬è™Ÿæˆ–å¾å»ºè­°ä¸­é¸æ“‡ï¼ˆç„¡éœ€è¼¸å…¥ "v" å‰ç¶´ï¼‰'})]}),(0,t.jsxs)("div",{className:h.default.formGroup,children:[(0,t.jsx)("label",{children:"é‡è¦æ€§"}),(0,t.jsx)(m,{rating:u.priority,interactive:!0,onChange:e=>c({...u,priority:e})}),(0,t.jsx)("small",{className:h.default.hint,children:"é»æ“Šæ˜Ÿæ˜Ÿè¨­å®š 1-5 æ˜Ÿè©•ç´š"})]}),(0,t.jsxs)("div",{className:h.default.formGroup,children:[(0,t.jsx)("label",{children:"æ¨™ç±¤"}),(0,t.jsxs)("div",{className:h.default.tagSelector,children:[d.map(e=>(0,t.jsx)("button",{type:"button",className:`${h.default.tagButton} ${u.tags.includes(e)?h.default.active:""}`,onClick:()=>{c(t=>({...t,tags:t.tags.includes(e)?t.tags.filter(t=>t!==e):[...t.tags,e]}))},children:e},e)),(0,t.jsx)("button",{type:"button",className:h.default.tagButtonAdd,onClick:()=>{let e=prompt("è¼¸å…¥è‡ªè¨‚æ¨™ç±¤ï¼š");e&&e.trim()&&!u.tags.includes(e.trim())&&c(t=>({...t,tags:[...t.tags,e.trim()]}))},children:"+ è‡ªè¨‚æ¨™ç±¤"})]}),u.tags.length>0&&(0,t.jsx)("div",{className:h.default.selectedTags,children:u.tags.map(e=>(0,t.jsxs)("span",{className:h.default.selectedTag,children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>{c(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},children:"Ã—"})]},e))})]}),(0,t.jsxs)("div",{className:h.default.formActions,children:[(0,t.jsx)("button",{type:"submit",className:h.default.btnSave,disabled:b,children:b?"å„²å­˜ä¸­...":"ğŸ’¾ å„²å­˜"}),(0,t.jsx)("button",{type:"button",className:h.default.btnCancel,onClick:l,disabled:b,children:"å–æ¶ˆ"})]})]})});b.displayName="GuideEditForm";var f=e.i(13660);function x(){let{user:e}=(0,s.useAuth)(),{guides:d,loading:o,addGuide:l,updateGuide:n,removeGuide:u}=function(){let{user:e}=(0,s.useAuth)(),[t,i]=(0,a.useState)([]),[d,o]=(0,a.useState)(!0),[l,n]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!e){o(!1),i([]);return}o(!0);let t=(0,r.subscribeToGameGuides)(e=>{i(e),o(!1)});return()=>t()},[e]);let u=(0,a.useCallback)(async e=>{try{return await (0,r.addGameGuide)(e)}catch(e){throw n(e instanceof Error?e.message:"æ–°å¢å¤±æ•—"),e}},[]),c=(0,a.useCallback)(async(e,t)=>{try{await (0,r.updateGameGuide)(e,{...t,updatedAt:new Date().toISOString()})}catch(e){throw n(e instanceof Error?e.message:"æ›´æ–°å¤±æ•—"),e}},[]),m=(0,a.useCallback)(async e=>{try{await (0,r.deleteGameGuide)(e)}catch(e){throw n(e instanceof Error?e.message:"åˆªé™¤å¤±æ•—"),e}},[]),g=(0,a.useCallback)(async(e,t)=>{await c(e,{completed:t})},[c]);return{guides:t,loading:d,error:l,addGuide:u,updateGuide:c,removeGuide:m,toggleCompleted:g}}(),[m,g]=(0,a.useState)(!1),[h,x]=(0,a.useState)(_.games[0]?.id||""),[G,v]=(0,a.useState)(null),[C,N]=(0,a.useState)(null),[j,y]=(0,a.useState)(!1),w=(0,a.useRef)(null);_.games.find(e=>e.id===h);let E=(0,a.useMemo)(()=>Array.from(new Set(d.filter(e=>e.gameId===h&&e.version).map(e=>e.version))).sort((e,t)=>{let a=parseFloat(e),r=parseFloat(t);return isNaN(a)||isNaN(r)?t.localeCompare(e):r-a}),[d,h]);(0,a.useEffect)(()=>{E.length>0?null!==G&&E.includes(G)||v(E[0]):v(null)},[E]),(0,a.useEffect)(()=>{(j||C)&&w.current&&setTimeout(()=>{w.current?.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[j,C]);let T=(0,a.useMemo)(()=>G?d.filter(e=>e.gameId===h&&(!e.version||e.version===G)):d.filter(e=>e.gameId===h),[d,h,G]),S=(0,a.useMemo)(()=>{let e={è§’è‰²é¤Šæˆ:[],è§’è‰²æ”»ç•¥:[],æ´»å‹•æ”»ç•¥:[],ç‰ˆæœ¬ç¸½è¦½:[],é€šç”¨è³‡æº:[]};return T.forEach(t=>{e[t.category].push(t)}),i.map(t=>[t,e[t]]).filter(([e,t])=>t.length>0)},[T]),F=(0,a.useCallback)(async e=>{await l(e),y(!1)},[l]),A=(0,a.useCallback)(async e=>{C&&(await n(C.id,e),N(null))},[C,n]),B=(0,a.useCallback)((e,t)=>{confirm(`ç¢ºå®šè¦åˆªé™¤ã€Œ${t}ã€å—ï¼Ÿ

æ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚`)&&u(e)},[u]);return e?o?(0,t.jsxs)("div",{className:f.default.loading,children:[(0,t.jsx)("div",{className:f.default.spinner}),(0,t.jsx)("p",{children:"è¼‰å…¥æ”»ç•¥è³‡æ–™ä¸­..."})]}):(0,t.jsxs)("div",{className:f.default.container,children:[(0,t.jsxs)("div",{className:f.default.toolbar,children:[(0,t.jsxs)("h1",{className:f.default.pageTitle,children:[(0,t.jsx)("span",{className:f.default.icon,children:"ğŸ®"}),"éŠæˆ²æ”»ç•¥ä¸­å¿ƒ"]}),(0,t.jsx)("button",{className:`${f.default.btnEditToggle} ${m?f.default.active:""}`,onClick:()=>{g(!m),y(!1),N(null)},children:m?"âœ“ å®Œæˆç·¨è¼¯":"âœ ç·¨è¼¯æ¨¡å¼"})]}),(0,t.jsx)("div",{className:f.default.gameSelector,children:_.games.map(e=>(0,t.jsxs)("button",{className:`${f.default.gameTab} ${h===e.id?f.default.active:""}`,onClick:()=>{x(e.id),v(null),N(null),y(!1)},children:[e.icon&&(0,t.jsx)("span",{className:f.default.gameIcon,children:e.icon}),e.name]},e.id))}),E.length>0&&(0,t.jsxs)("div",{className:f.default.versionSelector,children:[E.map(e=>(0,t.jsxs)("button",{className:`${f.default.versionChip} ${G===e?f.default.active:""}`,onClick:()=>v(e),children:["v",e]},e)),(0,t.jsx)("button",{className:`${f.default.versionChip} ${null===G?f.default.active:""}`,onClick:()=>v(null),children:"å…¨éƒ¨ç‰ˆæœ¬"})]}),m&&!j&&!C&&(0,t.jsx)("button",{className:f.default.btnAddGuide,onClick:()=>y(!0),children:"+ æ–°å¢æ”»ç•¥"}),(j||C)&&(0,t.jsx)("div",{ref:w,children:(0,t.jsx)(b,{guide:C||void 0,gameId:h,version:G||void 0,onSave:C?A:F,onCancel:()=>{y(!1),N(null)}})}),0===T.length?(0,t.jsxs)("div",{className:f.default.emptyState,children:[(0,t.jsx)("p",{children:"ğŸ“ ç›®å‰æ²’æœ‰æ”»ç•¥è³‡æ–™"}),m&&(0,t.jsx)("button",{className:f.default.btnAddGuide,onClick:()=>y(!0),children:"+ æ–°å¢ç¬¬ä¸€ç­†æ”»ç•¥"})]}):(0,t.jsx)("div",{className:f.default.groupedGuidesContainer,children:S.map(([e,a])=>(0,t.jsxs)("div",{className:f.default.categoryGroup,children:[(0,t.jsxs)("div",{className:f.default.categoryHeader,children:[(0,t.jsx)(c,{category:e}),(0,t.jsxs)("span",{className:f.default.categoryCount,children:["(",a.length,")"]})]}),(0,t.jsx)("div",{className:f.default.guidesGrid,children:a.map(e=>(0,t.jsx)(p,{guide:e,editMode:m,onEdit:()=>N(e),onDelete:()=>B(e.id,e.title)},e.id))})]},e))})]}):(0,t.jsxs)("div",{className:f.default.loginPrompt,children:[(0,t.jsx)("h2",{children:"ğŸ”’ è«‹å…ˆç™»å…¥"}),(0,t.jsx)("p",{children:"ç™»å…¥å¾Œå³å¯æŸ¥çœ‹å’Œç®¡ç†éŠæˆ²æ”»ç•¥"})]})}e.s(["default",()=>x],86393)}]);