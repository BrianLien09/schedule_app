(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19119,e=>{"use strict";e.i(36180);var a=e.i(98925),t=e.i(59141);function l(e){let a={};for(let[t,l]of Object.entries(e))void 0!==l&&(a[t]=l);return a}function n(e,l){if(!t.isFirebaseConfigured||!t.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");return(0,a.collection)(t.db,"shared","data",l)}async function i(e,t,i){let s=n(e,t),o=l({...i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return(await (0,a.addDoc)(s,o)).id}async function s(e,n,i,s){if(!t.isFirebaseConfigured||!t.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let o=(0,a.doc)(t.db,"shared","data",n,i),d=l({...s,updatedAt:new Date().toISOString()});await (0,a.setDoc)(o,d)}async function o(e,t,...l){let i=n(e,t),s=l.length>0?(0,a.query)(i,...l):i;return(await (0,a.getDocs)(s)).docs.map(e=>({id:e.id,...e.data()}))}async function d(e,n,i,s){if(!t.isFirebaseConfigured||!t.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let o=(0,a.doc)(t.db,"shared","data",n,i),d=l({...s,updatedAt:new Date().toISOString()});await (0,a.updateDoc)(o,d)}async function c(e,l,n){if(!t.isFirebaseConfigured||!t.db)throw Error("Firebase æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸");let i=(0,a.doc)(t.db,"shared","data",l,n);await (0,a.deleteDoc)(i)}function r(e,t,l,...i){let s=n(e,t),o=i.length>0?(0,a.query)(s,...i):s;return(0,a.onSnapshot)(o,e=>{l(e.docs.map(e=>({id:e.id,...e.data()})))})}async function m(e,a,t){let l=t.map(t=>{let{id:l,...n}=t;return s(e,a,l,n)});await Promise.all(l)}function u(e){return r("shared","gameGuides",e,(0,a.orderBy)("order","asc"))}async function _(e){return i("shared","gameGuides",e)}async function p(e,a){return d("shared","gameGuides",e,a)}async function h(e){return c("shared","gameGuides",e)}async function w(e){let a=e.map(e=>_(e));await Promise.all(a)}function f(e){return r("shared","courseNotes",e,(0,a.orderBy)("createdAt","desc"))}function v(e,t){return r("shared","courseNotes",t,(0,a.where)("courseId","==",e),(0,a.orderBy)("createdAt","desc"))}async function g(e){return i("shared","courseNotes",e)}async function x(e,a){return d("shared","courseNotes",e,a)}async function j(e){return c("shared","courseNotes",e)}async function S(e,a){return x(e,{completed:a})}async function T(){return(await o("shared","courseNotes",(0,a.where)("completed","==",!1),(0,a.where)("type","in",["homework","exam"]))).filter(e=>e.dueDate).sort((e,a)=>e.dueDate&&a.dueDate?new Date(e.dueDate).getTime()-new Date(a.dueDate).getTime():0)}e.s(["addCourseNote",()=>g,"addGameGuide",()=>_,"batchImportGameGuides",()=>w,"batchSetDocuments",()=>m,"deleteCourseNote",()=>j,"deleteDocument",()=>c,"deleteGameGuide",()=>h,"getDocuments",()=>o,"getIncompleteTasks",()=>T,"setDocument",()=>s,"subscribeToCollection",()=>r,"subscribeToCourseNotes",()=>f,"subscribeToCourseNotesByCourse",()=>v,"subscribeToGameGuides",()=>u,"toggleCourseNoteCompletion",()=>S,"updateCourseNote",()=>x,"updateDocument",()=>d,"updateGameGuide",()=>p])},8437,e=>{e.v({card:"LoginPrompt-module__ERCXna__card",container:"LoginPrompt-module__ERCXna__container",description:"LoginPrompt-module__ERCXna__description",footer:"LoginPrompt-module__ERCXna__footer",googleIcon:"LoginPrompt-module__ERCXna__googleIcon",icon:"LoginPrompt-module__ERCXna__icon",iconWrapper:"LoginPrompt-module__ERCXna__iconWrapper",loginButton:"LoginPrompt-module__ERCXna__loginButton",title:"LoginPrompt-module__ERCXna__title"})},24558,34759,e=>{"use strict";function a(e){return!!e}e.s(["hasWriteAccess",()=>a],24558);var t=e.i(43476),l=e.i(32341),n=e.i(8437);function i(){let{signInWithGoogle:e}=(0,l.useAuth)(),a=async()=>{try{await e()}catch(e){console.error("ç™»å…¥å¤±æ•—:",e),alert("ç™»å…¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}};return(0,t.jsx)("div",{className:n.default.container,children:(0,t.jsxs)("div",{className:n.default.card,children:[(0,t.jsx)("div",{className:n.default.iconWrapper,children:(0,t.jsx)("svg",{className:n.default.icon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,t.jsx)("h2",{className:n.default.title,children:"éœ€è¦ç™»å…¥"}),(0,t.jsx)("p",{className:n.default.description,children:"è«‹å…ˆä½¿ç”¨ Google å¸³è™Ÿç™»å…¥ï¼Œæ‰èƒ½æŸ¥çœ‹èª²è¡¨è³‡æ–™"}),(0,t.jsxs)("button",{onClick:a,className:n.default.loginButton,children:[(0,t.jsxs)("svg",{className:n.default.googleIcon,viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"ä½¿ç”¨ Google ç™»å…¥"]}),(0,t.jsx)("p",{className:n.default.footer,children:"åƒ…é™æˆæ¬Šçš„å®¶åº­æˆå“¡ç™»å…¥"})]})})}e.s(["default",()=>i],34759)},93475,e=>{"use strict";var a=e.i(71645),t=e.i(32341);let l=[{id:"mon-1",name:"è·æ¶¯åˆ†æèˆ‡è¦åŠƒ",day:1,startTime:"08:10",endTime:"10:00",location:"åšæ„›CB105D",color:"#FCD34D"},{id:"mon-2",name:"åœ‹æ–‡(II)ï¼šèªæ–‡è¡¨é”",day:1,startTime:"10:10",endTime:"12:00",location:"åšæ„›C306",color:"#FB923C"},{id:"mon-3",name:"æ•¸ä½é›»å­å­¸",day:1,startTime:"13:10",endTime:"16:00",location:"åšæ„›G313",color:"#A78BFA"},{id:"tue-1",name:"ç¶²éš›ç¶²è·¯æ¦‚è«–",day:2,startTime:"08:10",endTime:"10:00",location:"åšæ„›G512é›»è…¦æ•™å®¤",color:"#60A5FA"},{id:"tue-2",name:"å¤§å­¸ç”Ÿæ´»å­¸ç¿’èˆ‡è¼”å°",day:2,startTime:"13:10",endTime:"15:00",location:"åšæ„›G313",color:"#F9A8D4"},{id:"wed-1",name:"è‹±æ–‡(II)",day:3,startTime:"08:10",endTime:"10:00",location:"åšæ„›C608",color:"#34D399"},{id:"wed-2",name:"ç¾½çƒ",day:3,startTime:"10:10",endTime:"12:00",location:"åšæ„›å…¬èª æ¨“ç±ƒçƒå ´",color:"#F87171"},{id:"wed-3",name:"è³‡æ–™çµæ§‹",day:3,startTime:"15:10",endTime:"18:00",location:"åšæ„›G513é›»è…¦æ•™å®¤",color:"#818CF8"},{id:"fri-1",name:"æ°‘æ­Œèˆ‡å‰ä»–",day:5,startTime:"08:10",endTime:"10:00",location:"åšæ„›M304",color:"#2DD4BF"},{id:"fri-2",name:"Pythonè³‡æ–™è¦–è¦ºåŒ–",day:5,startTime:"10:10",endTime:"12:00",location:"åšæ„›G521é›»è…¦æ•™å®¤",color:"#A3E635"},{id:"fri-3",name:"Cç¨‹å¼è¨­è¨ˆ",day:5,startTime:"13:10",endTime:"16:00",location:"åšæ„›G512é›»è…¦æ•™å®¤",color:"#FB7185"}],n=[{id:"aut-1",date:"2026-01-11",startTime:"09:00",endTime:"18:00",note:"ç§‹å­£ç­"},{id:"aut-2",date:"2026-01-17",startTime:"09:00",endTime:"18:00",note:"ç§‹å­£ç­"},{id:"aut-3",date:"2026-01-18",startTime:"09:00",endTime:"18:00",note:"ç§‹å­£ç­"},{id:"win-1",date:"2026-01-27",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-2",date:"2026-01-29",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-3",date:"2026-02-02",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-4",date:"2026-02-04",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-5",date:"2026-02-05",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-6",date:"2026-02-06",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-7",date:"2026-02-09",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-8",date:"2026-02-10",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-9",date:"2026-02-11",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"},{id:"win-10",date:"2026-02-13",startTime:"09:00",endTime:"18:00",note:"å†¬ä»¤ç‡ŸåŠ©æ•™"}],i=[{id:"sel-1",title:"å¿—é¡˜åºçµæœæŸ¥è©¢ & æœ¬ç­é¸èª²",date:"2026-01-05",description:"09:00 æŸ¥è©¢çµæœ / 19:00 é–‹å§‹é¸èª²",type:"deadline"},{id:"sel-2",title:"æœ¬ç³»é¸èª² (å«è¼”é›™)",date:"2026-01-06",description:"19:00 é–‹å§‹",type:"deadline"},{id:"sel-3",title:"è·¨ç³»/è·¨ç­é¸èª²",date:"2026-01-08",description:"19:00 é–‹å§‹",type:"deadline"},{id:"sel-4",title:"å…¨æ ¡ç¶²è·¯åŠ é€€é¸",date:"2026-02-23",description:"ä¸Šåˆ 10:00 é–‹å§‹",type:"deadline"},{id:"sel-5",title:"äººå·¥åŠ é€€é¸",date:"2026-03-02",description:"ä¸Šåˆ 09:00 é–‹å§‹",type:"personal"}];var s=e.i(19119),o=e.i(24558);let d="shared";function c(){let{user:e}=(0,t.useAuth)(),[c,r]=(0,a.useState)([]),[m,u]=(0,a.useState)([]),[_,p]=(0,a.useState)([]),[h,w]=(0,a.useState)(!0),[f,v]=(0,a.useState)(!1),g=async()=>{try{let e=await (0,s.getDocuments)(d,"courses"),a=await (0,s.getDocuments)(d,"workShifts"),t=await (0,s.getDocuments)(d,"events");0===e.length&&await (0,s.batchSetDocuments)(d,"courses",l),0===a.length&&await (0,s.batchSetDocuments)(d,"workShifts",n),0===t.length&&await (0,s.batchSetDocuments)(d,"events",i)}catch(e){console.error("âŒ åˆå§‹åŒ–é è¨­è³‡æ–™å¤±æ•—:",e)}};(0,a.useEffect)(()=>{if(!e){r([]),u([]),p([]),w(!1),v(!1);return}w(!0),v((0,o.hasWriteAccess)(e.email)),g().then(()=>{w(!1)});let a=(0,s.subscribeToCollection)(d,"courses",e=>r(e)),t=(0,s.subscribeToCollection)(d,"workShifts",e=>u(e)),l=(0,s.subscribeToCollection)(d,"events",e=>p(e));return()=>{a(),t(),l()}},[e]);let x=async a=>{e&&f?await (0,s.setDocument)(d,"courses",a.id,a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},j=async(a,t)=>{e&&f?await (0,s.updateDocument)(d,"courses",a,t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},S=async a=>{e&&f?await (0,s.deleteDocument)(d,"courses",a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},T=async a=>{e&&f?await (0,s.setDocument)(d,"workShifts",a.id,a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},y=async(a,t)=>{e&&f?await (0,s.updateDocument)(d,"workShifts",a,t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},N=async a=>{e&&f?await (0,s.deleteDocument)(d,"workShifts",a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},E=async a=>{e&&f?await (0,s.setDocument)(d,"events",a.id,a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},C=async(a,t)=>{e&&f?await (0,s.updateDocument)(d,"events",a,t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},W=async a=>{e&&f?await (0,s.deleteDocument)(d,"events",a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")};return{courses:c,shifts:m,events:_,loading:h,canEdit:f,addCourse:x,updateCourse:j,deleteCourse:S,addWorkShift:T,updateWorkShift:y,deleteWorkShift:N,addEvent:E,updateEvent:C,deleteEvent:W}}e.s(["useScheduleData",()=>c],93475)},74777,e=>{"use strict";var a=e.i(43476);e.s(["StatCard",0,({icon:e,label:t,value:l,subtext:n,color:i})=>(0,a.jsxs)("div",{className:"glass card",style:{padding:"var(--spacing-md)",textAlign:"center",borderTop:`3px solid ${i}`,transition:"all 300ms ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,a.jsx)("div",{style:{color:i,marginBottom:"var(--spacing-sm)",display:"flex",justifyContent:"center"},children:e}),(0,a.jsx)("div",{style:{fontSize:"1rem",color:"var(--muted)",marginBottom:"var(--spacing-xs)",fontWeight:"bold"},children:t}),(0,a.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"var(--spacing-xs)",color:"var(--foreground)"},children:l}),n&&(0,a.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--foreground)",opacity:.8},children:n})]}),"TimelineItem",0,({time:e,title:t,location:l,isActive:n,isPast:i})=>(0,a.jsxs)("div",{style:{display:"flex",gap:"var(--spacing-md)",opacity:i?.5:1,position:"relative",paddingLeft:"var(--spacing-lg)"},children:[(0,a.jsx)("div",{style:{position:"absolute",left:"8px",top:0,bottom:0,width:"2px",background:n?"var(--color-primary)":"rgba(255, 255, 255, 0.1)"}}),(0,a.jsx)("div",{style:{position:"absolute",left:"2px",top:"8px",width:"14px",height:"14px",borderRadius:"50%",background:n?"var(--color-primary)":i?"var(--muted-dark)":"var(--glass-border)",border:`2px solid ${n?"var(--color-primary)":"var(--glass-border)"}`,boxShadow:n?"0 0 12px var(--color-primary)":"none"}}),(0,a.jsxs)("div",{style:{flex:1,paddingLeft:"var(--spacing-md)"},children:[(0,a.jsx)("div",{style:{fontSize:"0.85rem",color:"var(--muted)",marginBottom:"var(--spacing-xs)"},children:e}),(0,a.jsx)("div",{style:{fontWeight:600,marginBottom:"var(--spacing-xs)"},children:t}),l&&(0,a.jsxs)("div",{style:{fontSize:"0.85rem",color:"var(--muted-dark)"},children:["ğŸ“ ",l]})]})]})])},2502,89598,e=>{"use strict";var a=e.i(71645),t=e.i(32341),l=e.i(19119),n=e.i(24558);let i=["æ‰“å·¥æ”¶å…¥","ç”Ÿæ´»è²»åŒ¯æ¬¾","çå­¸é‡‘","é€€è²»","å…¶ä»–"];function s(){return`allowance-${Date.now()}`}function o(e,a){return e-a}function d(e){let[a,t,l]=e.split("-");return`${a}/${parseInt(t)}/${parseInt(l)}`}function c(e){if("ç”Ÿæ´»è²»åŒ¯æ¬¾"!==e.sourceType)return`åŒ¯å…¥æ—¥æœŸ: ${d(e.date)}
åŒ¯å…¥é‡‘é¡: ${e.amount}
ä¾†æº: ${e.sourceType}
å¸³ç°¿é¤˜é¡: ${e.totalBalance}
å°å‘†é¤˜é¡: ${e.xiaoBalance}`;{let a=e.totalBalance-e.xiaoBalance;return`åŒ¯å…¥æ—¥æœŸ: ${d(e.date)}
åŒ¯å…¥é‡‘é¡: ${e.amount}
å¸³ç°¿é¤˜é¡: ${e.totalBalance}
å­”å‘†é¤˜é¡: ${a}
å°å‘†é¤˜é¡: ${e.xiaoBalance}`}}e.s(["DEFAULT_SOURCE_TYPES",0,i,"calculateKongBalance",()=>o,"formatDateForCopy",()=>d,"generateAllowanceId",()=>s,"generateCopyText",()=>c],89598);let r="shared",m="allowanceRecords",u="allowanceSourceTypes";function _(){let{user:e}=(0,t.useAuth)(),[s,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(i),[_,p]=(0,a.useState)(!0),[h,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!e){o([]),c(i),p(!1),w(!1);return}p(!0),w((0,n.hasWriteAccess)(e.email));let a=(0,l.subscribeToCollection)(r,m,e=>{o(e.sort((e,a)=>a.timestamp-e.timestamp)),p(!1)}),t=(0,l.subscribeToCollection)(r,u,e=>{e.length>0&&e[0].types&&c(e[0].types)});return()=>{a(),t()}},[e]);let f=async a=>{e&&h?await (0,l.setDocument)(r,m,a.id,a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},v=async(a,t)=>{e&&h?await (0,l.updateDocument)(r,m,a,t):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},g=async a=>{e&&h?await (0,l.deleteDocument)(r,m,a):console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™")},x=async a=>{if(!e||!h)return void console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™");if(d.includes(a))return void console.warn("âš ï¸ ä¾†æºé¡å‹å·²å­˜åœ¨");let t=[...d,a];c(t),await (0,l.setDocument)(r,u,"config",{id:"config",types:t})},j=async a=>{if(!e||!h)return void console.warn("âŒ ç„¡ç·¨è¼¯æ¬Šé™");if(i.includes(a))return void console.warn("âš ï¸ ç„¡æ³•åˆªé™¤é è¨­ä¾†æºé¡å‹");let t=d.filter(e=>e!==a);c(t),await (0,l.setDocument)(r,u,"config",{id:"config",types:t})};return{records:s,sourceTypes:d,loading:_,canEdit:h,addRecord:f,updateRecord:v,deleteRecord:g,addSourceType:x,deleteSourceType:j}}e.s(["useAllowanceData",()=>_],2502)},20897,e=>{e.v({allowanceAmount:"page-module___8aEwW__allowanceAmount",allowanceCard:"page-module___8aEwW__allowanceCard",allowanceContent:"page-module___8aEwW__allowanceContent",allowanceEmpty:"page-module___8aEwW__allowanceEmpty",allowanceHeader:"page-module___8aEwW__allowanceHeader",allowanceLabel:"page-module___8aEwW__allowanceLabel",allowanceLink:"page-module___8aEwW__allowanceLink",allowanceRow:"page-module___8aEwW__allowanceRow",allowanceSplit:"page-module___8aEwW__allowanceSplit",allowanceSplitDivider:"page-module___8aEwW__allowanceSplitDivider",allowanceSplitItem:"page-module___8aEwW__allowanceSplitItem",allowanceSplitLabel:"page-module___8aEwW__allowanceSplitLabel",allowanceSplitValue:"page-module___8aEwW__allowanceSplitValue",allowanceValue:"page-module___8aEwW__allowanceValue",emptyState:"page-module___8aEwW__emptyState",emptyStateIcon:"page-module___8aEwW__emptyStateIcon",emptyStateSubtitle:"page-module___8aEwW__emptyStateSubtitle",emptyStateTitle:"page-module___8aEwW__emptyStateTitle",eventCard:"page-module___8aEwW__eventCard",eventContent:"page-module___8aEwW__eventContent",eventContentFaded:"page-module___8aEwW__eventContentFaded",eventContentFadedMore:"page-module___8aEwW__eventContentFadedMore",eventDate:"page-module___8aEwW__eventDate",eventDetails:"page-module___8aEwW__eventDetails",eventDot:"page-module___8aEwW__eventDot",eventDotDeadline:"page-module___8aEwW__eventDotDeadline",eventDotHoliday:"page-module___8aEwW__eventDotHoliday",eventDotOther:"page-module___8aEwW__eventDotOther",eventEmoji:"page-module___8aEwW__eventEmoji",eventEmojiSmall:"page-module___8aEwW__eventEmojiSmall",eventIcon:"page-module___8aEwW__eventIcon",eventIconClass:"page-module___8aEwW__eventIconClass",eventIconClassLight:"page-module___8aEwW__eventIconClassLight",eventIconDone:"page-module___8aEwW__eventIconDone",eventIconFree:"page-module___8aEwW__eventIconFree",eventIconSmall:"page-module___8aEwW__eventIconSmall",eventIconWork:"page-module___8aEwW__eventIconWork",eventIconWorkLight:"page-module___8aEwW__eventIconWorkLight",eventItem:"page-module___8aEwW__eventItem",eventLabel:"page-module___8aEwW__eventLabel",eventLabelMuted:"page-module___8aEwW__eventLabelMuted",eventLocationMuted:"page-module___8aEwW__eventLocationMuted",eventName:"page-module___8aEwW__eventName",eventSection:"page-module___8aEwW__eventSection",eventSectionTop:"page-module___8aEwW__eventSectionTop",eventTime:"page-module___8aEwW__eventTime",eventTimeNext:"page-module___8aEwW__eventTimeNext",eventTitle:"page-module___8aEwW__eventTitle",eventTitleSmall:"page-module___8aEwW__eventTitleSmall",eventsGrid:"page-module___8aEwW__eventsGrid",gamesButton:"page-module___8aEwW__gamesButton",gamesSection:"page-module___8aEwW__gamesSection",gamesSectionSubtitle:"page-module___8aEwW__gamesSectionSubtitle",gamesSectionTitle:"page-module___8aEwW__gamesSectionTitle",gridAuto:"page-module___8aEwW__gridAuto",header:"page-module___8aEwW__header",headerSubtitle:"page-module___8aEwW__headerSubtitle",headerTitle:"page-module___8aEwW__headerTitle",linkButton:"page-module___8aEwW__linkButton",monthTitle:"page-module___8aEwW__monthTitle",pageContainer:"page-module___8aEwW__pageContainer",sectionHeader:"page-module___8aEwW__sectionHeader",sectionTitle:"page-module___8aEwW__sectionTitle",statsGrid:"page-module___8aEwW__statsGrid",timelineContainer:"page-module___8aEwW__timelineContainer",urgentBadge:"page-module___8aEwW__urgentBadge",workShiftCard:"page-module___8aEwW__workShiftCard",workShiftDate:"page-module___8aEwW__workShiftDate",workShiftName:"page-module___8aEwW__workShiftName",workShiftTime:"page-module___8aEwW__workShiftTime",workShiftsGrid:"page-module___8aEwW__workShiftsGrid"})},52683,e=>{"use strict";var a=e.i(43476),t=e.i(22016),l=e.i(15009),n=e.i(74777),i=e.i(71645),s=e.i(93475),o=e.i(2502),d=e.i(32341),c=e.i(34759),r=e.i(89598),m=e.i(20897);function u(){let{user:e,loading:u}=(0,d.useAuth)(),{courses:_,shifts:p,events:h}=(0,s.useScheduleData)(),{records:w}=(0,o.useAllowanceData)(),{currentTimeStr:f,currentDayOfWeek:v,currentMonth:g,thisWeekClasses:x,thisMonthWorkDays:j,nextEvent:S,currentEvent:T,todaySchedule:y,monthlyWorkShifts:N,upcomingImportantEvents:E}=function(e,a,t){let[l,n]=(0,i.useState)(new Date);(0,i.useEffect)(()=>{let e=setInterval(()=>{n(new Date)},6e4);return()=>clearInterval(e)},[]);let s=l.getFullYear(),o=l.getMonth()+1,d=`${s}-${o.toString().padStart(2,"0")}`,c=l.toISOString().split("T")[0],r=l.toTimeString().slice(0,5),m=l.getDay(),u=(0,i.useMemo)(()=>e.filter(e=>e.day>=1&&e.day<=7).length,[e]),_=(0,i.useMemo)(()=>a.filter(e=>e.date.startsWith(d)).length,[d,a]),p=(0,i.useMemo)(()=>[...e.filter(e=>e.day===m&&e.startTime>r).map(e=>({type:"class",time:e.startTime,title:e.name,location:e.location||"",id:e.id.toString()})),...a.filter(e=>e.date===c&&e.startTime>r).map(e=>({type:"work",time:e.startTime,title:e.note||"æ‰“å·¥",location:"å·¥ä½œåœ°é»",id:e.id}))].sort((e,a)=>e.time.localeCompare(a.time)),[m,r,c,e,a])[0]||null,h=(0,i.useMemo)(()=>[...e.filter(e=>e.day===m&&e.startTime<=r&&(e.endTime||"23:59")>r).map(e=>({type:"class",time:`${e.startTime} - ${e.endTime||"?"}`,title:e.name,location:e.location||"",id:e.id.toString()})),...a.filter(e=>e.date===c&&e.startTime<=r&&e.endTime>r).map(e=>({type:"work",time:`${e.startTime} - ${e.endTime}`,title:e.note||"æ‰“å·¥",location:"å·¥ä½œåœ°é»",id:e.id}))][0]||null,[m,r,c,e,a]),w=(0,i.useMemo)(()=>e.filter(e=>e.day===m).sort((e,a)=>e.startTime.localeCompare(a.startTime)).slice(0,5),[m,e]);return{currentTimeStr:r,currentDayOfWeek:m,currentMonth:o,thisWeekClasses:u,thisMonthWorkDays:_,nextEvent:p,currentEvent:h,todaySchedule:w,monthlyWorkShifts:(0,i.useMemo)(()=>a.filter(e=>e.date.startsWith(d)).sort((e,a)=>e.date.localeCompare(a.date)),[d,a]),upcomingImportantEvents:(0,i.useMemo)(()=>{let e=new Date().toISOString().split("T")[0];return t.filter(a=>a.date>=e)},[t])}}(_,p,h),C=w.length>0?w[0]:null;return u?(0,a.jsx)("div",{className:m.default.pageContainer,children:(0,a.jsx)("div",{className:m.default.loadingContainer,children:"è¼‰å…¥ä¸­..."})}):e?(0,a.jsxs)("div",{className:m.default.pageContainer,children:[(0,a.jsxs)("section",{className:m.default.header,children:[(0,a.jsx)("h2",{className:m.default.headerTitle,children:"Welcome Back, Brian!"}),(0,a.jsx)("p",{className:m.default.headerSubtitle,children:"ä»Šå¤©ä¹Ÿæ˜¯å……æ»¿æ´»åŠ›çš„ä¸€å¤© ğŸ’ª"})]}),(0,a.jsxs)("div",{className:m.default.statsGrid,children:[(0,a.jsx)(n.StatCard,{icon:(0,a.jsx)(l.CalendarIcon,{size:32}),label:"æœ¬é€±èª²ç¨‹",value:x,subtext:"å ‚èª²",color:"var(--color-primary)"}),(0,a.jsx)(n.StatCard,{icon:(0,a.jsx)(l.CalendarIcon,{size:32}),label:"æœ¬æœˆæ‰“å·¥",value:j,subtext:"å¤©",color:"var(--color-highlight)"}),(0,a.jsxs)("div",{className:`glass card ${m.default.eventCard}`,children:[(0,a.jsxs)("div",{className:m.default.eventSectionTop,children:[(0,a.jsxs)("div",{className:m.default.eventLabel,children:[(0,a.jsx)("span",{className:"animate-pulse",children:"â—"})," ",T?"æ­£åœ¨é€²è¡Œ":"ç›®å‰ç‹€æ…‹"]}),T?(0,a.jsxs)("div",{className:m.default.eventContent,children:[(0,a.jsx)("div",{className:`${m.default.eventIcon} ${"class"===T.type?m.default.eventIconClass:m.default.eventIconWork}`,children:"class"===T.type?(0,a.jsx)(l.SchoolIcon,{size:28}):(0,a.jsx)(l.BriefcaseIcon,{size:28})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:m.default.eventTitle,children:T.title}),(0,a.jsx)("div",{className:m.default.eventTime,children:T.time})]})]}):(0,a.jsxs)("div",{className:m.default.eventContentFaded,children:[(0,a.jsx)("div",{className:m.default.eventIcon+" "+m.default.eventIconFree,children:(0,a.jsx)("span",{className:m.default.eventEmoji,children:"â˜•"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:m.default.eventTitle,children:"ç›®å‰ç©ºæª”"}),(0,a.jsx)("div",{className:m.default.eventTime,children:"ä¼‘æ¯ä¸€ä¸‹,æº–å‚™è¿æ¥æŒ‘æˆ°"})]})]})]}),(0,a.jsxs)("div",{className:m.default.eventSection,children:[(0,a.jsx)("div",{className:m.default.eventLabelMuted,children:S?"ç¨å¾Œè¡Œç¨‹":"ä»Šæ—¥å¾ŒçºŒ"}),S?(0,a.jsxs)("div",{className:m.default.eventContent,children:[(0,a.jsx)("div",{className:`${m.default.eventIconSmall} ${"class"===S.type?m.default.eventIconClassLight:m.default.eventIconWorkLight}`,children:"class"===S.type?(0,a.jsx)(l.SchoolIcon,{size:20}):(0,a.jsx)(l.BriefcaseIcon,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:m.default.eventTitleSmall,children:S.title}),(0,a.jsxs)("div",{className:m.default.eventTimeNext,children:[S.time," ",(0,a.jsxs)("span",{className:m.default.eventLocationMuted,children:["@ ",S.location]})]})]})]}):(0,a.jsxs)("div",{className:m.default.eventContentFadedMore,children:[(0,a.jsx)("div",{className:m.default.eventIconSmall+" "+m.default.eventIconDone,children:(0,a.jsx)("span",{className:m.default.eventEmojiSmall,children:"ğŸŒ™"})}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:m.default.eventTitleSmall,children:"ä»Šæ—¥è¡Œç¨‹å·²çµæŸ"})})]})]})]}),(0,a.jsxs)("div",{className:`glass card ${m.default.allowanceCard}`,children:[(0,a.jsxs)("div",{className:m.default.allowanceHeader,children:[(0,a.jsx)(l.WalletIcon,{size:20}),(0,a.jsx)("span",{children:"ç”Ÿæ´»è²»è¨˜éŒ„"})]}),C?(0,a.jsxs)("div",{className:m.default.allowanceContent,children:[(0,a.jsxs)("div",{className:m.default.allowanceRow,children:[(0,a.jsx)("span",{className:m.default.allowanceLabel,children:"æœ€è¿‘åŒ¯å…¥"}),(0,a.jsx)("span",{className:m.default.allowanceValue,children:(0,r.formatDateForCopy)(C.date)})]}),(0,a.jsxs)("div",{className:m.default.allowanceRow,children:[(0,a.jsx)("span",{className:m.default.allowanceLabel,children:"åŒ¯å…¥é‡‘é¡"}),(0,a.jsxs)("span",{className:`${m.default.allowanceValue} ${m.default.allowanceAmount}`,children:["NT$ ",C.amount.toLocaleString()]})]}),(0,a.jsxs)("div",{className:m.default.allowanceRow,children:[(0,a.jsx)("span",{className:m.default.allowanceLabel,children:"ä¾†æº"}),(0,a.jsx)("span",{className:m.default.allowanceValue,children:C.sourceType})]}),(0,a.jsxs)("div",{className:m.default.allowanceRow,children:[(0,a.jsx)("span",{className:m.default.allowanceLabel,children:"å¸³ç°¿é¤˜é¡"}),(0,a.jsxs)("span",{className:m.default.allowanceValue,children:["NT$ ",C.totalBalance.toLocaleString()]})]}),"ç”Ÿæ´»è²»åŒ¯æ¬¾"===C.sourceType?(0,a.jsxs)("div",{className:m.default.allowanceSplit,children:[(0,a.jsxs)("div",{className:m.default.allowanceSplitItem,children:[(0,a.jsx)("span",{className:m.default.allowanceSplitLabel,children:"å°å‘†é¤˜é¡"}),(0,a.jsxs)("span",{className:m.default.allowanceSplitValue,children:["NT$ ",C.xiaoBalance.toLocaleString()]})]}),(0,a.jsx)("div",{className:m.default.allowanceSplitDivider}),(0,a.jsxs)("div",{className:m.default.allowanceSplitItem,children:[(0,a.jsx)("span",{className:m.default.allowanceSplitLabel,children:"å­”å‘†é¤˜é¡"}),(0,a.jsxs)("span",{className:m.default.allowanceSplitValue,children:["NT$ ",(0,r.calculateKongBalance)(C.totalBalance,C.xiaoBalance).toLocaleString()]})]})]}):(0,a.jsxs)("div",{className:m.default.allowanceRow,children:[(0,a.jsx)("span",{className:m.default.allowanceLabel,children:"å°å‘†é¤˜é¡"}),(0,a.jsxs)("span",{className:m.default.allowanceValue,children:["NT$ ",C.xiaoBalance.toLocaleString()]})]}),(0,a.jsx)(t.default,{href:"/tools/allowance",className:m.default.allowanceLink,children:"æŸ¥çœ‹è©³ç´°è¨˜éŒ„ â†’"})]}):(0,a.jsxs)("div",{className:m.default.allowanceEmpty,children:[(0,a.jsx)("p",{children:"å°šç„¡ç”Ÿæ´»è²»è¨˜éŒ„"}),(0,a.jsx)(t.default,{href:"/tools/allowance",className:m.default.allowanceLink,children:"å»ºç«‹ç¬¬ä¸€ç­†è¨˜éŒ„ â†’"})]})]})]}),(0,a.jsxs)("div",{className:m.default.gridAuto,children:[(0,a.jsxs)("section",{className:"glass card",children:[(0,a.jsx)("h3",{className:m.default.sectionHeader,children:"ğŸ“… ä»Šæ—¥èª²ç¨‹"}),(0,a.jsx)("div",{className:m.default.timelineContainer,children:y.length>0?y.map(e=>{let t=e.endTime<f,l=e.startTime<=f&&e.endTime>f;return(0,a.jsx)(n.TimelineItem,{time:e.startTime,title:e.name,location:e.location,isActive:l,isPast:t},e.id)}):(0,a.jsx)("div",{className:m.default.emptyState,children:0===v||6===v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:m.default.emptyStateIcon,children:"ğŸ‰"}),(0,a.jsx)("div",{className:m.default.emptyStateTitle,children:"ä»Šå¤©æ˜¯é€±æœ«!"}),(0,a.jsx)("div",{className:m.default.emptyStateSubtitle,children:"å¥½å¥½ä¼‘æ¯,äº«å—ç¾å¥½æ™‚å…‰ âœ¨"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:m.default.emptyStateIcon,children:"â˜•"}),(0,a.jsx)("div",{className:m.default.emptyStateTitle,children:"ä»Šå¤©æ²’æœ‰èª²ç¨‹"}),(0,a.jsx)("div",{className:m.default.emptyStateSubtitle,children:"å¯ä»¥å¥½å¥½åˆ©ç”¨é€™æ®µæ™‚é–“!"})]})})}),(0,a.jsx)(t.default,{href:"/schedule",className:`btn ${m.default.linkButton}`,children:"æŸ¥çœ‹å®Œæ•´æ—¥ç¨‹ â†’"})]}),(0,a.jsxs)("section",{className:"glass card",children:[(0,a.jsx)("h3",{className:m.default.sectionTitle,children:"âš¡ å³å°‡åˆ°ä¾†"}),(0,a.jsx)("div",{className:m.default.eventsGrid,children:E.map(e=>(0,a.jsxs)("div",{className:m.default.eventItem,children:[(0,a.jsx)("div",{className:`${m.default.eventDot} ${"deadline"===e.type?m.default.eventDotDeadline:"holiday"===e.type?m.default.eventDotHoliday:m.default.eventDotOther}`}),(0,a.jsxs)("div",{className:m.default.eventDetails,children:[(0,a.jsx)("div",{className:m.default.eventName,children:e.title}),(0,a.jsx)("div",{className:m.default.eventDate,children:e.date})]}),"deadline"===e.type&&(0,a.jsx)("span",{className:m.default.urgentBadge,children:"ç·Šæ€¥"})]},e.id))})]})]}),(0,a.jsxs)("section",{className:"glass card",children:[(0,a.jsxs)("h3",{className:m.default.monthTitle,children:[(0,a.jsx)(l.CalendarIcon,{size:24}),(0,a.jsxs)("span",{children:["æœ¬æœˆæ‰“å·¥ä¸€è¦½ (",g,"æœˆ)"]})]}),(0,a.jsx)("div",{className:m.default.workShiftsGrid,children:N.map(e=>(0,a.jsxs)("div",{className:m.default.workShiftCard,children:[(0,a.jsxs)("div",{className:m.default.workShiftDate,children:[e.date.split("-")[1],"/",e.date.split("-")[2]]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:m.default.workShiftName,children:e.note}),(0,a.jsxs)("div",{className:m.default.workShiftTime,children:[e.startTime," - ",e.endTime]})]})]},e.id))})]}),(0,a.jsxs)("section",{className:m.default.gamesSection,children:[(0,a.jsx)("h3",{className:m.default.gamesSectionTitle,children:"ä¼‘æ¯ä¸€ä¸‹?"}),(0,a.jsx)("p",{className:m.default.gamesSectionSubtitle,children:"å·¥ä½œå­¸ç¿’ä¹‹é¤˜,ä¹Ÿåˆ¥å¿˜äº†æ”¾é¬†å¿ƒæƒ…ã€‚"}),(0,a.jsxs)(t.default,{href:"/games",className:`btn ${m.default.gamesButton}`,children:[(0,a.jsx)(l.GamepadIcon,{size:20}),(0,a.jsx)("span",{children:"å‰å¾€æ”»ç•¥ä¸­å¿ƒ"})]})]})]}):(0,a.jsx)(c.default,{})}e.s(["default",()=>u],52683)}]);